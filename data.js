// Библиотека стандартных навыков (38 навыков)
const STANDARD_SKILLS = [
    { name: 'Азартные игры', stat: 'INT', level: 0 },
    { name: 'Акробатика', stat: 'BODY', level: 0 },
    { name: 'Артистизм', stat: 'CHA', level: 0 },
    { name: 'Атлетика', stat: 'BODY', level: 0 },
    { name: 'Ближний бой', stat: 'DEX', level: 0 },
    { name: 'Боевые искусства', stat: 'DEX', level: 0, special: true },
    { name: 'Бюрократия', stat: 'INT', level: 0 },
    { name: 'Внешний вид', stat: 'CHA', level: 0 },
    { name: 'Внимательность', stat: 'INT', level: 0 },
    { name: 'Вождение', stat: 'REA', level: 0 },
    { name: 'Выживание', stat: 'WILL', level: 0 },
    { name: 'Дальний бой', stat: 'REA', level: 0 },
    { name: 'Допрос', stat: 'CHA', level: 0 },
    { name: 'Естествознание', stat: 'INT', level: 0 },
    { name: 'Знание местности', stat: 'INT', level: 0 },
    { name: 'Игра на инструменте', stat: 'TECH', level: 0 },
    { name: 'Интуиция', stat: 'INT', level: 0, multiplier: 2 },
    { name: 'Кражи', stat: 'DEX', level: 0 },
    { name: 'Кибер-безопасность', stat: 'TECH', level: 0 },
    { name: 'Обаяние', stat: 'CHA', level: 0 },
    { name: 'Обман', stat: 'CHA', level: 0 },
    { name: 'Общие знания', stat: 'INT', level: 0 },
    { name: 'Оружейник', stat: 'TECH', level: 0 },
    { name: 'Первая помощь', stat: 'INT', level: 0 },
    { name: 'Плавание', stat: 'BODY', level: 0 },
    { name: 'Подрывник', stat: 'TECH', level: 0 },
    { name: 'Поиск', stat: 'INT', level: 0, multiplier: 2 },
    { name: 'Проницательность', stat: 'CHA', level: 0 },
    { name: 'Простая техника', stat: 'TECH', level: 0 },
    { name: 'Рисунок', stat: 'CHA', level: 0 },
    { name: 'Сетевые технологии', stat: 'TECH', level: 0 },
    { name: 'Скрытность', stat: 'REA', level: 0 },
    { name: 'Сопротивление пыткам', stat: 'WILL', level: 0 },
    { name: 'Сопротивление ядам', stat: 'WILL', level: 0 },
    { name: 'Техническое чудо', stat: 'TECH', level: 0 },
    { name: 'Торг', stat: 'CHA', level: 0, footnote: 'Только для Решалы!' },
    { name: 'Транспорт', stat: 'TECH', level: 0 },
    { name: 'Убеждение', stat: 'INT', level: 0 },
    { name: 'Уклонение', stat: 'DEX', level: 0 },
    { name: 'Язык', stat: 'INT', level: 0, special: true }
];

// Библиотека стандартных программ деки (23 программы)
const STANDARD_PROGRAMS = [
    {
        name: 'Актуальная версия ПО',
        price: 1000,
        ram: 0,
        lethal: false,
        description: 'Актуальная на сегодняшний день версия ледокола для файрволла. Да — дорого. Тебя предупреждали. Очень часто заказчики дают Сёрферам актуальное ПО на момент выдачи заказа в качестве аванса за работу.'
    },
    {
        name: 'ИИ',
        price: 500,
        ram: 2,
        lethal: false,
        description: 'Искусственный интеллект, который ты можешь подселить куда-либо. Свободно продаются в интернете. Занимает 2 Памяти (ОЗУ), но помещается на обычную щепку памяти. Ты сам обучаешь его действиям.'
    },
    {
        name: 'Боньк',
        price: 500,
        ram: 2,
        lethal: false,
        description: 'Заставляет цель ударить себя по голове ближайшим предметом. Наносит 2d4 урона по голове цели. Цель теряет своё действие в своём следующем ходу, может только перемещаться.'
    },
    {
        name: 'Визг',
        price: 1000,
        ram: 1,
        lethal: true,
        description: 'Симулирует визг в ушах. Ошеломляет цель, заставляя её схватиться за уши. Не наносит урона, действует 1 ход цели. Цель может пройти проверку Сопротивления Пыткам СЛ 18.'
    },
    {
        name: 'Волнограф',
        price: 100,
        ram: 1,
        lethal: false,
        description: 'Позволяет Сёрферу увидеть устройства на своей сетке. Проверка: 2d6 + Версия деки = максимальное количество устройств. Без Волнографа Сёрфер воздействует только на то, что физически видит.'
    },
    {
        name: 'Луговая собачка',
        price: 100,
        ram: 1,
        lethal: false,
        description: 'Программа-паразит, раздражающая нервную систему пищеварения через ЦНС, что заставляет цель сильно хотеть в туалет. Не имеет вредных эффектов, кроме нарративных.'
    },
    {
        name: 'Марионетка',
        price: 500,
        ram: 2,
        lethal: false,
        description: 'Позволяет взять устройство под свой контроль до тех пор, пока ты не решишь отключиться. Может выключить одну конкретную опцию киберимпланта на 1 ход цели.'
    },
    {
        name: 'Миша, давай по новой',
        price: 1000,
        ram: 2,
        lethal: true,
        description: 'В своём следующем ходу цель будет вынуждена действовать точь-в-точь наоборот, чем в свой прошлый ход, как в обратной перемотке. Если это сделать невозможно, цель остаётся на месте и ничего не делает.'
    },
    {
        name: 'Мозготрах',
        price: 1000,
        ram: 0,
        lethal: true,
        description: 'Разгоняет ЦНС-процессор цели, нанося урон непосредственно в мозг. Каждые вложенные 1 очко ОЗУ наносят 1d6 урона прямо в мозг цели. ОЗУ на выбор Сёрфера.'
    },
    {
        name: 'Нормально же общались',
        price: 1000,
        ram: 2,
        lethal: false,
        description: 'Удаляет случайную программу на деке целевого Сёрфера.'
    },
    {
        name: 'Обнулятор',
        price: 5000,
        ram: 3,
        lethal: true,
        description: 'Заставляет человека потратить ход на одну атаку самого себя, против своей воли. Если он вооружён ОДБ, он стреляет себе в голову один раз. Если вооружён ОББ, то он атакует себя, а потом уклоняется сам от себя.'
    },
    {
        name: 'Открывашка',
        price: 500,
        ram: 1,
        lethal: false,
        description: 'Открывает все отсеки в киберимплантах цели, заставляя выпасть всё содержимое.'
    },
    {
        name: 'Паутинка',
        price: 500,
        ram: 1,
        lethal: false,
        description: 'Дублирует действие следующей отправленной программы (с ОЗУ не более 2) в этом ходу на все цели в радиусе 3 пространств от исходной цели программы.'
    },
    {
        name: 'Поводок',
        price: 1000,
        ram: 2,
        lethal: false,
        description: 'Позволяет сбить с ног подвижную живую цель или дрона (имитация рывка или удара волной по ногам цели).'
    },
    {
        name: 'Поросёнок с яблочком',
        price: 500,
        ram: 1,
        lethal: true,
        description: 'Разгоняет процессоры в импланте цели, заставляя её слабо гореть. Каждая повторная отправка этой программы увеличивает требуемое ОЗУ на +1 и усиливает горение на один шаг (слабо → средне → смертельно).'
    },
    {
        name: 'Рефанд',
        price: 500,
        ram: 1,
        lethal: false,
        description: 'Возвращает отправителю программы его же «выстрел» – при успешном взломе отражает полученную программу обратно в атакующего. Нужно активировать в свой ход, действует до следующего хода активировавшего.'
    },
    {
        name: 'Сделать Бум',
        price: 1000,
        ram: 2,
        lethal: true,
        description: 'Программа против транспортных средств (если у них есть подключение к Сети). Наносит 2d6 повреждений сразу по ОСП транспорта. Может вместо урона: заставить барахлить системы, дёрнуть руль, заглушить двигатель.'
    },
    {
        name: 'Сканер',
        price: 500,
        ram: 1,
        lethal: false,
        description: 'Показывает информацию об устройстве в Волновой сети. Если цель – живое существо, выводит список его киберимплантов; если предмет – его условное обозначение и примерный функционал. Игрок может задать 1 уточняющий вопрос Мастеру об устройстве (да/нет).'
    },
    {
        name: 'Топфхельм',
        price: 500,
        ram: 1,
        lethal: false,
        description: 'Усилитель ЦНС-импланта, нивелирующий урон, наносимый мозгу, до следующего хода Сёрфера: уменьшает урон на 1d6 за каждое ОЗУ, вложенное в активацию программы.'
    },
    {
        name: 'Тушите свет',
        price: 2000,
        ram: 0,
        lethal: false,
        description: 'Программа из режима Полного погружения. Если Сёрфер потратит минуту и преодолеет взлом СЛ 20, он способен отключить объект размером с небольшое здание от электричества на сутки. Затрачивает всё доступное ОЗУ на 1 минуту.'
    },
    {
        name: 'Ультра-разгон',
        price: 500,
        ram: 1,
        lethal: false,
        description: 'Разгоняет мощность процессора устройства, заставляя его взорваться для отвлечения внимания. Не наносит взрывной урон. Не действует на живых существ и импланты (только на электронику).'
    },
    {
        name: 'Утопить',
        price: 1000,
        ram: 2,
        lethal: true,
        description: 'Насильно накрывает цель Волной Сети, погружая её в «Океан». Наносит 1d4 урона Осознанности цели (по шкале психики/нейропсихоза).'
    },
    {
        name: 'Чёрная метка',
        price: 200,
        ram: 1,
        lethal: false,
        description: 'Помечает цель сетевой меткой на количество часов, равное вложенному ОЗУ. Сёрфер может отслеживать цель в Океане, зная её местонахождение и к чему она подключена. Метку можно снять только полностью отключившись от сети либо погрузившись «под воду».'
    }
];

// Библиотека киберимплантов (6 категорий)
const CYBERIMPLANTS_LIBRARY = {
    "Внутренние органы": [
        {
            name: "Второе сердце",
            price: 500,
            awarenessLoss: "2d6",
            description: "Дублирует «родное» сердце — при остановке работает как резерв; можно активировать без действия, даёт +5 ПЗ или +1 к Инициативе перед боем или +1 к РЕА."
        },
        {
            name: "Зацикленный воздухообмен",
            price: 500,
            awarenessLoss: "1d6",
            description: "Обеспечивает циркуляцию кислорода из внутреннего баллончика (требуется «Малое хранилище» с баллончиком воздуха); позволяет не дышать носом."
        },
        {
            name: "Кибер-регенерация",
            price: 1000,
            awarenessLoss: "1d6",
            description: "Наноботы ускоряют естественное восстановление в 2 раза (ускоренное исцеление)."
        },
        {
            name: "Модуль экстренного жизнеобеспечения",
            price: 5000,
            awarenessLoss: "1d20",
            description: "Поддерживает жизнь при критическом состоянии (функционирует, пока жив мозг); при активации полностью истощает Заряд на ближайшие сутки и автоматически стабилизирует пользователя при падении ПЗ < 1 (пользователь теряет сознание)."
        },
        {
            name: "Ускоритель обмена веществ",
            price: 500,
            awarenessLoss: "1d6",
            description: "Ускоряет и усиливает эффект внутривенных препаратов в 2 раза (как позитивный, так и негативный)."
        },
        {
            name: "Фильтр токсинов",
            price: 1000,
            awarenessLoss: "1d6",
            description: "Повышенная устойчивость к ядам/токсинам через пищу, воду или воздух; можно отключать."
        }
    ],
    "Нейронные": [
        {
            name: "Банковский чип",
            price: 50,
            awarenessLoss: "нет",
            description: "Хранит запись банковского аккаунта и даёт доступ к операциям (может быть запаролен/привязан по ДНК)."
        },
        {
            name: "Замедлитель",
            price: 500,
            awarenessLoss: "1d6",
            description: "Замедляет субъективное время до 8× — для пользователя 1 ход равен 8 минутам внешнего времени; облегчает перенос болезней и долгих ожиданий; регулируется."
        },
        {
            name: "Крипто-щепка",
            price: 50,
            awarenessLoss: "нет",
            description: "Чип для анонимных/защищённых платежей или хранения крипты/данных (может содержать вредоносное ПО)."
        },
        {
            name: "Кибер-сон",
            price: 500,
            awarenessLoss: "1d6",
            description: "Управление сном и сновидениями; позволяет высыпаться в любых условиях; в режиме сна пользователь полностью отключён."
        },
        {
            name: "Нейро-конденсаторы",
            price: 1000,
            awarenessLoss: "2d6",
            description: "Впитывают лишнюю нейронную энергию; восстанавливают 2 заряда за раунд вместо 1."
        },
        {
            name: "Нейро-порты",
            price: 100,
            awarenessLoss: "1d4",
            description: "Порты/штекеры для подключения устройств; минимум 1 порт требуется для подключения, к одному порту — только одно устройство. Цена за каждый порт."
        },
        {
            name: "Разъём для щепок",
            price: 100,
            awarenessLoss: "1d4",
            description: "Разъём для установки одной щепки (чипа). Цена за каждый разъём."
        },
        {
            name: "Усилитель мозговой активности",
            price: 500,
            awarenessLoss: "1d20",
            description: "Ускоряет обучение; уменьшает затраты Очков Опыта на улучшение навыков на 25%."
        },
        {
            name: "Ускоритель",
            price: 5000,
            awarenessLoss: "4d6",
            description: "Замедляет для пользователя время в 2 раза. Буквально позволяет ходить ему два раза в свой ход. ."
        },
        {
            name: "ЦНС-модуль",
            price: 0,
            awarenessLoss: "0",
            description: "Базовый нейронный имплант, необходимый для подключения остальных имплантов к нервной системе (есть у всех по умолчанию)."
        },
        {
            name: "ЦНС-сервер",
            price: 1000,
            awarenessLoss: "2d6",
            description: "Управление устройствами «силой мысли» через Волновую сеть; позволяет одновременно без штрафа подключать до 3 устройств; при активации подключаемых устройств наносит по 1d4 ПО."
        },
        {
            name: "Щепка навыка",
            price: 100,
            awarenessLoss: "1d4",
            description: "Чип, обучающий навыку (не для профессиональных навыков); при вставке вызывает ПО. Цена за уровень 1, уровни 2-5: 150/300/1000/5000."
        }
    ],
    "Оружие": [
        {
            name: "Баллистический щит",
            price: 100,
            awarenessLoss: "1d6",
            description: "Встроенный твёрдый щит с 20 ПЗ; активируется без действия, не мешает стрельбе."
        },
        {
            name: "Внешняя мини-станина",
            price: 100,
            awarenessLoss: "1d6",
            description: "Крепление для оружия или крупного предмета (скрытое хранение); извлечь/убрать — действие."
        },
        {
            name: "Встроенное оружие",
            price: 1000,
            awarenessLoss: "4d6",
            description: "Встроенное в тело оружие класса ПП (с приёмником боеприпасов); стреляет из места установки (например, ладони)."
        },
        {
            name: "Генератор атмосферы",
            price: 1000,
            awarenessLoss: "2d6",
            description: "Выпускает облако 5×5 (дым/огонь/токсичность) вокруг пользователя; пользователь также подвержен эффектам; боеприпасы покупаются по цене гранат."
        },
        {
            name: "Интегрированный гранатомёт",
            price: 2000,
            awarenessLoss: "3d4",
            description: "Встроенный гранатомёт с магазином на одну гранату."
        },
        {
            name: "Лазерная кромка",
            price: 250,
            awarenessLoss: "1d4",
            description: "Лазерные «ногти»/микросетка на ногтях. Очень лёгкое ОББ, но за каждый ноготь. Если вы устанавливаете их по 5 штук (все 5 занимают 1 слот) на руку, то это 5d6/2 урона за раз. Можно бить двумя руками одновременно. Цена за 1 штуку"
        },
        {
            name: "Микроракеты",
            price: 5000,
            awarenessLoss: "4d6",
            description: "Пусковая установка с магазином на 6 микроракет (урон 6d6 1 пространство); требует ЦНС-Сервер и оптического целеуказателя для корректного применения; одна ракета даёт мощный взрыв."
        },
        {
            name: "Моноструна",
            price: 1000,
            awarenessLoss: "2d6",
            description: "Нано-нить с грузиком для бесшумного устранения целей. Это Тяжелое ОББ, которое при соприкосновении с целью (пройдя броню) дополнительно наносит 1d6 урона от огня. Моноструну можно использовать для захвата, постоянно нанося её урон и урон от ожога каждый ход, пока твоя цель в захвате." 
        },
        {
            name: "Пневматический длинный клинок",
            price: 1000,
            awarenessLoss: "4d6",
            description: "Занимает 1 руку, не позволяя что-либо держать ей. Имеет 3 варианта использования: Стандартное использование — атака цели в соседнем пространстве, как Тяжелым ОББ. Клинки статичны, заряд не расходуется. Удлинённые клинки — выдвигает клинки на максимум, позволяя атаковать цели на расстоянии в 2 пространства, в т.ч. за углом, считается как Среднее ОББ. Расходует заряд. Пневматическое усиление — пневмоприводы клинков ускоряют клинки при атаке в соседнее пространство. Полностью игнорируют броню ниже 15. Если пользователь попал по цели 2 раза за ход, он может пройти проверку Атлетики со СЛ, равной утроенному Телосложению цели, при успехе, он пронзил цель и поднял её над землёй, нанеся еще 2d6, игнорируя броню. Пользователь и цель не могут совершать никаких Действий (у одного руки заняты, другой в агонии) до тех пор, пока цель не опустят на землю или пользователя не Собьют с ног. Если установлены парно и используются одновременно, это добавляет 1d6 к их урону, но расходуют в 2 раза больше заряда."
        },
        {
            name: "Складной клинок",
            price: 500,
            awarenessLoss: "1d6",
            description: "Скрываемый в теле тяжёлый клинок; требует действие для достать/убрать."
        },
        {
            name: "Скрытый нож",
            price: 100,
            awarenessLoss: "1d4",
            description: "Скрытое среднее оружие; требует действие для достать/убрать."
        },
        {
            name: "Электропроводка",
            price: 500,
            awarenessLoss: "4d6",
            description: "Контактная электропроводящая проволока — наносит ЭМИ/электроурон; наносит урон электричеством (5d6), при 1ПЗ цель теряет сознание на 1d6 раундов.."
        }
    ],
    "Перемещение": [
        {
            name: "Гребные винты",
            price: 500,
            awarenessLoss: "1d6",
            description: "Винты для передвижения в жидкостных средах; ускорение в воде тратит больше Заряда."
        },
        {
            name: "Крылья для планирования",
            price: 5000,
            awarenessLoss: "4d6",
            description: "Парашют/крылья для планирования — уменьшают урон от падения свыше 30 м; не позволяют зависать."
        },
        {
            name: "Модуль для точечного давления",
            price: 500,
            awarenessLoss: "2d6",
            description: "Заменяет конечность острым имплантом; превращает её в необычное тяжёлое ближнее оружие; снижает ЛВК на 1 при установке в ноги."
        },
        {
            name: "Плавники",
            price: 100,
            awarenessLoss: "1d4",
            description: "Ласты/плавник для повышения скорости в воде (+1 к СКО, максимум +10)."
        },
        {
            name: "Прыжковый ускоритель",
            price: 3000,
            awarenessLoss: "2d6",
            description: "Реактивный ускоритель для подъёма на большие высоты (до ~100 м за короткое время); при активации раскрываются сопла."
        },
        {
            name: "Реактивные стабилизаторы",
            price: 1000,
            awarenessLoss: "2d6",
            description: "Стабилизируют положение при падении/сбивании с ног; могут работать в безвоздушном пространстве при подключении баллончика воздуха."
        },
        {
            name: "Ролик",
            price: 100,
            awarenessLoss: "1d4",
            description: "Скрытые колёсики в импланте — удваивают скорость на подходящей поверхности; ограничения на повороты и сложную местность."
        }
    ],
    "Слух, зрение, голос": [
        {
            name: "Анализатор голоса и стресса",
            price: 500,
            awarenessLoss: "1d6",
            description: "Распознавание лжи/стресса по аудио/визуальным признакам с ~80% шансом при попытке."
        },
        {
            name: "Аудио-фильтр",
            price: 500,
            awarenessLoss: "1d6",
            description: "Активное шумоподавление; полное нивелирование эффектов резкого шума; позволяет отключать конкретные звуки."
        },
        {
            name: "Детектор/анализатор",
            price: 500,
            awarenessLoss: "1d6",
            description: "Специализированный сенсор для обнаружения выбранного вещества/волны/субстанции (радиация, токсины и т.д.); при активации снижает некоторый максимум на 1."
        },
        {
            name: "Зрительный 3D-сканер",
            price: 5000,
            awarenessLoss: "4d6",
            description: "Сложный сканер, позволяющий видеть «сквозь» разрушимые преграды до ~4 м; большая видимая площадь, используется для разведки."
        },
        {
            name: "Ищейка",
            price: 500,
            awarenessLoss: "1d6",
            description: "Усиление обоняния; бонус +3 к проверкам Поиск, связанным с обонянием."
        },
        {
            name: "Камера для кибер-оптики",
            price: 500,
            awarenessLoss: "1d6",
            description: "Запись и трансляция видео; при подключении к ЦНС может служить зрением. 0 ПО если установлена как глазной имплант."
        },
        {
            name: "Крепление для камеры",
            price: 500,
            awarenessLoss: "0",
            description: "Фиксированное крепление для малой/средней камеры; позволяет развернуть камеру действием."
        },
        {
            name: "Оптическое приближение",
            price: 500,
            awarenessLoss: "1d6",
            description: "Оптический зум до 200× без потери качества (не влияет на прицеливание напрямую)."
        },
        {
            name: "Оптический целеуказатель",
            price: 2000,
            awarenessLoss: "3d6",
            description: "Модуль для зрительных имплантов и оружия с самонаведением; помечает цель через сеть, даёт бонус −2 к сложности стрельбы и даёт трек на 20 минут в радиусе 1 км."
        },
        {
            name: "ПНВ и тепловизионное зрение",
            price: 1000,
            awarenessLoss: "2d6",
            description: "Ночные режимы и тепловизор, переключаемые в любой момент; выявляет тепловые подписи."
        },
        {
            name: "Регулятор интенсивности света",
            price: 500,
            awarenessLoss: "1d6",
            description: "Адаптация к ярким вспышкам и изменению освещённости; даёт иммунитет к ослепляющим эффектам."
        }
    ],
    "Дополнительная всячина": [
        {
            name: "Сетевое зрение",
            price: 1000,
            awarenessLoss: "4d6",
            description: "Визуализация Волновой сети поверх реального мира; важен для Сёрферов для взаимодействия с серверами и кильватерами."
        },
        {
            name: "Тюнер",
            price: 500,
            awarenessLoss: "1d4",
            description: "Меняет голос; воспроизводит записанные звуки с щепки."
        },
        {
            name: "Фасеточное зрение",
            price: 5000,
            awarenessLoss: "4d6",
            description: "Набор «множества глаз» (до 12 отдельных глаз), расширяет слоты зрения и возможности сенсоров."
        },
        {
            name: "Экран для хронотома",
            price: 500,
            awarenessLoss: "1d4",
            description: "Выводит Хрона (интерфейс) прямо в зрение пользователя (AR-окно)."
        },
        {
            name: "Эндоскоп",
            price: 500,
            awarenessLoss: "1d4",
            description: "Выдвижной визуальный модуль до 50 см с 2 слотами опций — для исследований/ремонта/медпроцедур."
        },
        {
            name: "Батарейка",
            price: 100,
            awarenessLoss: "0",
            description: "Восстанавливает 2 единицы Заряда; можно подключать к Нейро-порту или активировать; требует перезарядки."
        },
        {
            name: "Кошка (магнитно-пневматическая)",
            price: 500,
            awarenessLoss: "1d6",
            description: "Гибкий шнур/манипулятор длиной 40 м для захвата/доставки/стрельбы по таблице попадания гранатомёта."
        },
        {
            name: "Мультитул",
            price: 500,
            awarenessLoss: "1d4",
            description: "Инструменты (гаечные ключи, паяльник и т.п.) в импланте; +2 ко всем проверкам технических навыков (кроме работы с киберимплантами)."
        },
        {
            name: "Оптический камуфляж",
            price: 5000,
            awarenessLoss: "6d6",
            description: "Активная маскировка (военный уровень) — даёт −5СЛ к проверкам Скрытности; ограничен по использованию и снятию; снижает максимум Заряда на 5 при активации."
        },
        {
            name: "Подушка",
            price: 100,
            awarenessLoss: "0",
            description: "Надувающийся модуль-подушка; предотвращает утопление и улучшает сон (мелкие бонусы)."
        },
        {
            name: "Внутреннее укрепление полимером",
            price: 250,
            awarenessLoss: "1d4",
            description: "Полимерная прослойка под кожей, даёт +15 ОС в месте установки; самовосстанавливается 2 ОС в сутки. Цена за штуку."
        },
        {
            name: "Внутреннее укрепление полиметаллом",
            price: 500,
            awarenessLoss: "1d4",
            description: "Прослойка из полиметалла под кожей, даёт +18 ОС в месте установки; самовосстанавливается 1 ОС в сутки. Цена за штуку."
        },
        {
            name: "Экзоскелет",
            price: 2000,
            awarenessLoss: "0",
            description: "Внешняя рама с сервоприводами — повышает фиктивные Телосложение, Ловкость, Скорость на +5; требует нейро-портов; работает ~12 часов."
        },
        {
            name: "Экранированная защита",
            price: 150,
            awarenessLoss: "1d4",
            description: "Сетка под кожей, даёт полную стойкость к ЭМИ в установленной области; модуль устанавливается по частям. Цена за штуку."
        },
        {
            name: "Эндоскелет",
            price: 5000,
            awarenessLoss: "0",
            description: "Встроенная скрытая рама — повышает Телосложение, Ловкость, Скорость на +5; требует постоянного подключения к ЦНС-Серверу; работает ~10 часов."
        },
        {
            name: "Духовка (мини-духовка)",
            price: 500,
            awarenessLoss: "1d4",
            description: "Маленькая встроенная духовка для подогрева пищи; может использоваться как импровизированное оружие (описан шутливый эффект)."
        },
        {
            name: "Малое хранилище",
            price: 100,
            awarenessLoss: "1d4",
            description: "Хранилище 1×1 с 2 слотами для подключения (например, баллончики, батарейки)."
        },
        {
            name: "Микроволновка",
            price: 500,
            awarenessLoss: "1d4",
            description: "Маленькая микроволновка для подогрева; при использовании наносит ЭМИ-урон дополнительно."
        },
        {
            name: "Отсек для дрона",
            price: 500,
            awarenessLoss: "1d4",
            description: "Скрытое хранилище для одного дрона (или преобразование части тела в дрона — по согласованию с мастером)."
        },
        {
            name: "Отсек для ОББ",
            price: 500,
            awarenessLoss: "1d4",
            description: "Хранилище для одного ОББ до средних размеров (скрытое хранение оружия)."
        },
        {
            name: "Отсек для ОДБ",
            price: 500,
            awarenessLoss: "1d4",
            description: "Хранилище для одного ОДБ до средних размеров (скрытое хранение оружия дальнего боя)."
        },
        {
            name: "Отсек для патронов",
            price: 500,
            awarenessLoss: "1d4",
            description: "Хранилище патронов; можно перезаряжать магазины или питать кибер-оружие изнутри."
        },
        {
            name: "Отсек для щепок",
            price: 100,
            awarenessLoss: "0",
            description: "Хранилище для щепок (вмещает до 10 штук); не позволяет подключать их, но защищает от потери/поломки."
        },
        {
            name: "Средний отсек",
            price: 500,
            awarenessLoss: "2d6",
            description: "Хранилище 10×5 с 4 слотами подключения для снаряжения (баллончики, батарейки и т.п.)."
        },
        {
            name: "Холодильная камера",
            price: 500,
            awarenessLoss: "1d4",
            description: "Хранилище 2×2 для хранения еды/напитков; можно объединять и использовать как морозилку."
        },
        {
            name: "Экранированная камера",
            price: 500,
            awarenessLoss: "0",
            description: "Встраиваемая камера внутри хранилища, полностью защищающая содержимое от ЭМИ (заполняет 1×1 объёма внутри хранилища)."
        }
    ]
};

// Библиотека снаряжения (60 предметов)
const GEAR_LIBRARY = [
    { name: '3D-ПРИНТЕР', price: 1000, load: 81, description: 'Принтер, печатающий из полимеров. Заправляется материалом за 10 уе. Не печатает оружие и броню, но может сделать костюм солдата. Требует электричества. Создание предмета — Простая техника (ТЕХ).' },
    { name: 'АНАЛИЗАТОР', price: 100, load: 1, description: 'Прибор с встроенной щепкой для анализа конкретного параметра среды. Пищит при обнаружении цели на 1 метр или по мере увеличения концентрации вещества.' },
    { name: 'АНТИВИБРАЦИОННЫЕ ЭЛЕМЕНТЫ', price: 10, load: 1, description: 'Фибронейлоновые накладки, глушащие вибрации. Позволяют нивелировать игнорирование брони виброклинками, но выглядят нелепо.' },
    { name: 'АНТИРАДИАЦИОННЫЙ КОСТЮМ', price: 500, load: 25, description: 'Костюм, защищающий от радиации и ножевых ударов. Надевается поверх Средней и легче брони. Даёт 10 ОС, теряет защиту при первом повреждении. Можно заклеивать дыры заплатками (100 уе за 10).' },
    { name: 'АПТЕЧКА', price: 200, load: 1, description: 'Даёт +5 к Первой помощи. Выпитый спирт восстанавливает 10 ПЗ на 10 минут, затем они исчезают (при уходе в отрицательные — обморок на 30 минут).' },
    { name: 'БЫТОВОЙ ТЕПЛОВИЗОР', price: 500, load: 1, description: 'Дальность 6 м. Показывает тепловую картину окружения. Полезен для поиска людей, проводки и скрытых вентиляций.' },
    { name: 'ВИДЕОЭНДОСКОП', price: 100, load: 1, description: 'Камера на гибком шнуре 1 м для осмотра под дверями и в механизмах. Запись до 6 часов ч/б видео на чип.' },
    { name: 'ВИНГСЬЮТ', price: 5000, load: 50, description: 'Костюм для планирования (с парашютом). 10 м высоты = 50 м полёта. Минимум 100 м. Совместим с Прыжковыми ускорителями.' },
    { name: 'ДРОН НА КОЛЁСАХ', price: 100, load: 2, description: 'Радиоуправляемая машинка с камерой. Дальность — 1 км через Сеть или 50 м по радио.' },
    { name: 'ЛЕТАЮЩИЙ ДРОН', price: 100, load: 2, description: 'Летающий дрон с камерой. Дальность 5 км по Сети или 100 м по радио. Может зависать в воздухе.' },
    { name: 'ГЕЙМЕРСКИЙ КОМПЛЕКТ', price: 999, load: 0, description: 'Декоративное улучшение любого предмета (RGB, углы, подсветка). Не даёт эффектов, только визуальный блеск.' },
    { name: 'ДЕТЕКТОР ЖУЧКОВ', price: 500, load: 1, description: 'Пищит при приближении к жучкам на 2 м. Не указывает точное место.' },
    { name: 'ДЕТЕКТОР РАДИАЦИИ', price: 500, load: 1, description: 'Показывает уровень радиации и максимальное время нахождения в зоне.' },
    { name: 'ЗАЖИГАЛКА', price: 10, load: 0.1, description: 'Обычная зажигалка. Ничего особенного.' },
    { name: 'ЗОНТ', price: 10, load: 0.1, description: 'Защищает от дождя голову и плечи.' },
    { name: 'ИЗОЛЕНТА', price: 10, load: 0.1, description: 'Клейкая лента для изоляции и склейки. Бывает светящейся.' },
    { name: 'КОМПЕНСАТОР ПАДЕНИЯ', price: 200, load: 2, description: 'Реактивные подошвы, смягчающие падение до 100 м (при Акробатике СЛ 13).' },
    { name: 'КОМПЛЕКТ ИЗМЕНЕНИЯ ВКУСА', price: 50, load: 0.1, description: 'Приправы, маскирующие вкус еды (даже яда).' },
    { name: 'КОМПЛЕКТ ПРОВОДОВ И ПЕРЕХОДНИКОВ', price: 100, load: 2, description: 'Универсальные переходники для соединения техники. Для всего нужны навыки ТЕХ.' },
    { name: 'МАРКЕР С ПРОГРАММИРУЕМОЙ КРАСКОЙ', price: 100, load: 1, description: 'Краска видна только через настроенные импланты или визоры. Хватает на 100 м линии.' },
    { name: 'МАСКА ДЛЯ 3D-ВИДЕО', price: 1000, load: 2, description: 'Маска, превращающая видео в 3D. Позволяет менять точку обзора.' },
    { name: 'МУЛЬТИТУЛ', price: 100, load: 1, description: 'Универсальный инструмент. Даёт +2 к проверкам ремонта и создания (ТЕХ).' },
    { name: 'НАБОР ВЫЖИВАЛЬЩИКА', price: 1000, load: 50, description: 'Всё для долгосрочного выживания — печь, вода, еда, палатка, инструменты и т.д.' },
    { name: 'НАБОР ТУРИСТА', price: 2000, load: 25, description: 'Лёгкий набор для комфортного отдыха на природе. Палатка, горелка, пайки и аксессуары.' },
    { name: 'НАБОР ДЛЯ ЕДЫ', price: 100, load: 1, description: 'Ложка, вилка, нож, палочки. Для еды и угроз вилкой в глаз.' },
    { name: 'НАБОР ЧИСТЫХ ФЛЕШЕК ИЛИ ЧИПОВ', price: 50, load: 1, description: '5 флешек по 6 ч записи. Совместимы с биоразъёмами.' },
    { name: 'НАНОФОН', price: 100, load: 0.1, description: '5 микрофонов для скрытой записи (радиус 50 м, 6 ч работы).' },
    { name: 'НАПРАВЛЕННЫЙ МИКРОФОН', price: 1000, load: 8, description: 'Дальность 200 м, слышит через открытые пространства, но не через преграды.' },
    { name: 'НАРУЧНИКИ', price: 500, load: 1, description: 'Сковывают руки. Можно сломать (ТЕЛО ≥ 10) или выскользнуть (ЛВК ≥ 8, ТЕЛО ≤ 4).' },
    { name: 'НАУШНИКИ С ШУМОПОДАВЛЕНИЕМ', price: 500, load: 1, description: 'Беспроводные. Дают иммунитет к оглушению при 75 %+ подавлении. Можно глохнуть на выбор.' },
    { name: 'НИЖНЕЕ БЕЛЬЁ С НЕОНОВЫМИ НИТЯМИ', price: 100, load: 1, description: 'Светится в темноте. Освещает до 5 пространств. Для вечеринок и экстрима.' },
    { name: 'НОУТБУК', price: 500, load: 9, description: 'Компактный компьютер. Работает 12 ч без зарядки. Можно управлять дроном, писать, монтировать.' },
    { name: 'ОЧКИ С ОПТИЧЕСКИМИ СЛОТАМИ', price: 500, load: 1, description: 'Вмещают 1 модуль (ПНВ, Целеуказатель и др.). Активируется жестом или словом.' },
    { name: 'ПАЁК АВАРИЙНЫЙ (СУТОЧНЫЙ)', price: 50, load: 0.1, description: 'Прямоугольная таблетка с питательными веществами. Отвратителен на вкус, но спасает.' },
    { name: 'ПАЁК ГРАЖДАНСКИЙ (12 ЧАСОВ)', price: 100, load: 1, description: 'Две порции соевой еды для походов. Нужно 2 в день для сытости.' },
    { name: 'ПАЁК ТУРИСТИЧЕСКИЙ (СУТОЧНЫЙ)', price: 100, load: 2, description: 'Суточный набор еды, приборов, печка и обеззараживатель воды.' },
    { name: 'ПАЛАТКА БОЛЬШАЯ', price: 1000, load: 15, description: 'Для 5 человек, с солнечной панелью (зарядка 2 хронотомов или 1 ноутбука).' },
    { name: 'ПАЛАТКА МАЛАЯ', price: 500, load: 3, description: 'На одного. Солнечная панель заряжает 1 устройство. Служит 6 мес.' },
    { name: 'ПИСТОЛЕТ-КОШКА', price: 500, load: 2, description: 'Стреляет крюком с кабелем на 40 м. Требует шнур и Акробатику СЛ 15 для лазания.' },
    { name: 'ПЛАЩ-ПАЛАТКА (ДОЖДЕВИК)', price: 100, load: 2, description: 'Защищает от дождя, снижает ЛВК на 1. Можно спать в ней 1 ночь без штрафа.' },
    { name: 'ПРЕЗЕРВАТИВЫ', price: 50, load: 0.1, description: '10 штук, разные вкусы и цвета. Можно хранить сигареты сухими.' },
    { name: 'ПРОТИВОГАЗ', price: 100, load: 2, description: 'Защищает от токсинов и газа, но не от радиации.' },
    { name: 'ПРОТИВОУДАРНЫЙ КЕЙС', price: 100, load: 16, description: 'Прочный кейс с внутренним объёмом 3×3. 10 ОС, 10 ПЗ. Для хрупких вещей.' },
    { name: 'ПРЫЖКОВЫЕ УСКОРИТЕЛИ', price: 2000, load: 9, description: 'Поднимают на 100 м за 3 сек. Требуют топливо (Канистра 100 уе).' },
    { name: 'РАЦИЯ', price: 100, load: 1, description: 'Дальность 2 км. Работает на общих волнах. Не подключается к сетям военных.' },
    { name: 'РЕБРИЗЕР И ЛАСТЫ', price: 100, load: 8, description: 'Позволяет дышать под водой 30 мин. Ласты снимают штраф на скорость.' },
    { name: 'РЕДАКТОР RFID', price: 100, load: 2, description: 'Перепрограммирует или печатает карточки. Копирование занимает секунды, создание — 3 часа.' },
    { name: 'РЮКЗАК', price: 100, load: 8, description: 'Даёт -2 ЛВК. Можно надеть спереди (-4 ЛВК). Требует действия для снятия и извлечения.' },
    { name: 'СИГАРЕТЫ ИЗ ЗАМЕНИТЕЛЯ ТАБАКА', price: 50, load: 0.1, description: 'Без эффектов, просто вид курильщика.' },
    { name: 'СИГАРЕТЫ ИЗ ТАБАКА', price: 1000, load: 0.1, description: 'Настоящие сигареты. Могут вызвать зависимость (СЛ 12). Урон 2 по ПЗ при курении.' },
    { name: 'СКАФАНДР С ЗАМКНУТОЙ АТМОСФЕРОЙ', price: 5000, load: 80, description: 'Тяжёлая броня. Выдерживает экстремальные условия. Питание на 12 ч.' },
    { name: 'СКЛАДНОЙ ВЕЛОСИПЕД', price: 500, load: 36, description: 'Складной транспорт. Скорость = Атлетика ×2. Одноместный.' },
    { name: 'СМАЗКА ЛИЧНАЯ', price: 50, load: 1, description: 'Безопасная, ароматная. Для живых существ.' },
    { name: 'СМАЗКА ТЕХНИЧЕСКАЯ', price: 100, load: 1, description: 'Устраняет трение, добавляет +10% скорости технике на 1 час.' },
    { name: 'СТЕКЛОРЕЗ', price: 50, load: 1, description: 'Лазерный резак стекла (до 15 см). Работает час, батарейки по 10 уе.' },
    { name: 'СУМКА', price: 50, load: 2, description: 'Вмещает 1 крупный предмет (например, оружие). Маскирует переноску.' },
    { name: 'ТЕЛЕФОН (АРХАИЧНЫЙ)', price: 100, load: 1, description: 'Одноразовый смартфон или раскладушка. Используется для связи без ID.' },
    { name: 'УНИВЕРСАЛЬНАЯ МЕХАНИЧЕСКАЯ ОТМЫЧКА', price: 50, load: 1, description: 'Для вскрытия механических замков. 3 заряда, после чего ломается.' },
    { name: 'УСТРОЙСТВО ДЛЯ ПОДЪЁМА ПО ШНУРАМ', price: 100, load: 8, description: 'Перемещение по проводам и тросам. Используется для перемещения между зданиями.' },
    { name: 'ФАЛЬШФЕЙЕР', price: 100, load: 1, description: 'Освещает 10 пространств на 5 минут.' },
    { name: 'ФОНАРИК', price: 50, load: 1, description: 'Светит на 50 пространств вперёд. Работает на батарейках.' },
    { name: 'ХРОНОТОМ (ДЕШЁВЫЙ)', price: 0, load: 0, description: 'Устройство с AR-режимом, встроенной рекламой и базовым функционалом связи.' },
    { name: 'ХРОНОТОМ (ДОРОГОЙ)', price: 0, load: 0, description: 'Улучшенная версия без рекламы, с голографическим экраном и тихим режимом.' },
    { name: 'ЦИНКОВЫЙ ЯЩИК', price: 50, load: 4, description: 'Экранированный контейнер, блокирующий сигналы. Используется для перевозки техники и людей с имплантами. За 0.25 м².' },
    { name: 'ЧИП ДЛЯ ВЗЛОМА Э-ЗАМКОВ', price: 500, load: 1, description: 'Электронная отмычка. 3 заряда. Для вскрытия электронных замков.' },
    { name: 'ШЛЕМ ДЛЯ ПРОСМОТРА РЕАЛЬНИЗАЦИИ', price: 5000, load: 4, description: 'Шлем и костюм для полного погружения в Реальнизацию. Можно использовать только шлем.' },
    { name: 'ШНУР / ВЕРЁВКА', price: 10, load: 1, description: 'Прочная верёвка, выдерживает вес трёх человек. За 50 м.' }
];

// Библиотека оружия ближнего боя
const MELEE_WEAPONS = [
    {
        type: 'Очень лёгкое',
        examples: 'Заточка, опасная бритва, перочинный нож, офисная кружка с горячим шоколадом, шило',
        damage: '1d3',
        concealable: true,
        stealthPenalty: '+1',
        price: 10,
        load: 1
    },
    {
        type: 'Лёгкое',
        examples: 'Кухонный нож, маленький молоток, отвёртка, ножка от стула',
        damage: '1d6',
        concealable: true,
        stealthPenalty: '0',
        price: 50,
        load: 2
    },
    {
        type: 'Среднее',
        examples: 'Бейсбольная бита, мачете, фомка',
        damage: '2d6',
        concealable: false,
        stealthPenalty: '-1',
        price: 50,
        load: 4
    },
    {
        type: 'Тяжёлое',
        examples: 'Кусок трубы, арматура, меч, катана, бейсбольная бита с гвоздями',
        damage: '3d6',
        concealable: false,
        stealthPenalty: '-2',
        price: 100,
        load: 6
    },
    {
        type: 'Очень тяжёлое',
        examples: 'Кувалда, бензопила, лопасть вертолёта',
        damage: '4d6',
        concealable: false,
        stealthPenalty: '-2',
        price: 500,
        load: 8
    },
    {
        type: 'Сверхтяжёлое',
        examples: 'Опора ЛЭП, малая корабельная торпеда, кусок стены, кусок автомобиля, железнодорожный буфер',
        damage: '5d6',
        concealable: 'Тебя за ним можно скрыть',
        stealthPenalty: '-3, и требует ТЕЛО 12 и более',
        price: 1000,
        load: 10
    }
];

// Библиотека оружия дальнего боя
const RANGED_WEAPONS = [
    {
        type: 'Лёгкий пистолет',
        primaryDamage: '4d4',
        altDamage: '2d6',
        concealable: true,
        hands: 1,
        stealth: 2,
        magazine: 6,
        price: 100,
        load: 2
    },
    {
        type: 'Обычный пистолет',
        primaryDamage: '5d4',
        altDamage: '3d6',
        concealable: true,
        hands: 1,
        stealth: 2,
        magazine: 9,
        price: 200,
        load: 3
    },
    {
        type: 'Крупнокалиберный пистолет',
        primaryDamage: '6d4',
        altDamage: '4d6',
        concealable: true,
        hands: 1,
        stealth: 2,
        magazine: 5,
        price: 500,
        load: 4
    },
    {
        type: 'Пистолет-пулемёт',
        primaryDamage: '5d4',
        altDamage: '3d6',
        concealable: true,
        hands: 1,
        stealth: 2,
        magazine: 20,
        price: 200,
        load: 4
    },
    {
        type: 'Тяжёлый пистолет-пулемёт',
        primaryDamage: '6d4',
        altDamage: '4d6',
        concealable: true,
        hands: 2,
        stealth: 2,
        magazine: 10,
        price: 500,
        load: 5
    },
    {
        type: 'Штурмовая винтовка',
        primaryDamage: '8d4',
        altDamage: '5d6',
        concealable: false,
        hands: 2,
        stealth: 1,
        magazine: 30,
        price: 1000,
        load: 6
    },
    {
        type: 'Снайперская винтовка',
        primaryDamage: '8d4',
        altDamage: '3d10',
        concealable: false,
        hands: 2,
        stealth: 1,
        magazine: 5,
        price: 1000,
        load: 8
    },
    {
        type: 'Пулемёт',
        primaryDamage: '8d4',
        altDamage: '6d6',
        concealable: false,
        hands: 2,
        stealth: 1,
        magazine: 100,
        price: 5000,
        load: 9
    },
    {
        type: 'Дробовик',
        primaryDamage: '3d10',
        altDamage: '—',
        concealable: false,
        hands: 2,
        stealth: 1,
        magazine: '2x3',
        price: 500,
        load: 5
    },
    {
        type: 'Гранатомёт',
        primaryDamage: '2d20',
        altDamage: '—',
        concealable: false,
        hands: 1,
        stealth: 1,
        magazine: 2,
        price: 2000,
        load: 7
    },
    {
        type: 'Ракетомёт',
        primaryDamage: '5d10',
        altDamage: '—',
        concealable: false,
        hands: 2,
        stealth: 1,
        magazine: 1,
        price: 5000,
        load: 11
    },
    {
        type: 'Оружие с самонаведением',
        primaryDamage: '5d4',
        altDamage: '3d6',
        concealable: 'обычно да',
        hands: '1-0',
        stealth: 1,
        magazine: 1,
        price: 5000,
        load: 2
    }
];

// Библиотека модулей оружия
const WEAPON_MODULES = {
    melee: [
        {
            name: 'Баллистическая рукоять',
            compatible: 'Клинковое оружие',
            description: 'Встраивает в рукоять пиропатрон. Действием можно выстрелить клинком на 5 пространств перед собой. Проверка попадания стандартная: Ближний бой атакующего против Уклонения защищающегося.',
            price: 1000,
            load: 1
        },
        {
            name: 'Вибропривод для клинка',
            compatible: 'Любое оружие',
            description: 'ОББ теперь полностью игнорирует ОС ниже или равную 15. ОС выше снижается вдвое как обычно.',
            price: 5000,
            load: 1
        },
        {
            name: 'Зазубренное лезвие',
            compatible: 'Клинковое оружие',
            description: 'Лезвие имеет зазубрины для рвания плоти, нанося травмы. Если хотя бы 1 урон достиг ПЗ цели при атаке таким оружием, цель получает эффект Кровотечение: раз в раунд перед своим ходом цель получает 1 урон. Если цель получает этот урон после того, как её ПЗ стало равно 0, то цель безвозвратно умирает. Кровотечение можно остановить проверкой навыка «Первая помощь» СЛ 18 (например, прижечь рану). Эффекты от нескольких кровотечений суммируются.',
            price: 500,
            load: 1
        },
        {
            name: 'Рукоять с горелкой',
            compatible: 'Неклинковое оружие',
            description: 'Дубина превращается в паяльник — при попадании одновременно поджигает цель. Цель начинает Слабо гореть; если хотя бы 1 урон достиг ПЗ цели, она немедленно получает 1d6 урона от огня.',
            price: 1000,
            load: 1
        },
        {
            name: 'Телескопичность',
            compatible: 'Неклинковое оружие',
            description: 'Дубина/рукоять кувалды/опора ЛЭП становится телескопической — можно спрятать своё ОББ без проверки. Если владелец не пожелает показывать оружие, найти его проверкой навыка «Внимательность» невозможно; обнаружение возможно только техническими средствами.',
            price: 500,
            load: 1
        },
        {
            name: 'Цепной привод',
            compatible: 'Любое оружие',
            description: 'По периметру оружия вращается цепь бензопилы. Оружие получает дополнительную +1 к СКА и может вызвать эффект Кровотечение, если наносит урон.',
            price: 5000,
            load: 1
        },
        {
            name: 'Электрический конденсатор',
            compatible: 'Оружие с металлической ударной частью',
            description: 'Конденсатор подсоединяется к металлу в ударной части оружия. Расходует батарейку (10уе) с зарядом на 1 удар. Помимо основного урона оружие теперь наносит электрический урон (5d6; броня может защитить). Замена батарейки — полное действие.',
            price: 1500,
            load: 1
        }
    ],
    ranged: [
        {
            name: 'Барабанный магазин',
            compatible: 'ПП, ТПП, ШВ, ПУЛ, ГМ',
            description: 'В 4 раза больше патронов. Перезарядка — 2 действия или весь ход.',
            price: 500,
            load: 1
        },
        {
            name: 'Увеличенный магазин',
            compatible: 'ПП, ТПП, ШВ, ПУЛ, ГМ',
            description: 'В 2 раза больше патронов.',
            price: 100,
            load: 1
        },
        {
            name: 'Глушитель (крупнокалиберный)',
            compatible: 'СВ, ПУЛ, КП',
            description: 'Не слышно далее 25 метров. Ресурс — 50 выстрелов.',
            price: 500,
            load: 1
        },
        {
            name: 'Глушитель (мелкокалиберный)',
            compatible: 'ТПП, ШВ, ДР, ЛП, ОП, ПП',
            description: 'Не слышно далее 16 метров. Ресурс — 50 выстрелов.',
            price: 250,
            load: 1
        },
        {
            name: 'Глушитель (мембранный)',
            compatible: 'ТПП, ШВ, ДР, ЛП, ОП, ПП',
            description: 'Совершенно бесшумный. Ресурс — 10 выстрелов.',
            price: 250,
            load: 1
        },
        {
            name: 'Замена всех деталей на полимерные',
            compatible: 'ЛП, ОП, КП, ПП, ТПП, ГМ',
            description: 'Невидим для детекторов. Ресурс — 50 выстрелов.',
            price: 1000,
            load: 1
        },
        {
            name: 'Коллиматорный прицел',
            compatible: 'любое оружие',
            description: '(оригинал) сл близкой стрельбы = пистолет. Пистолет — -2 сл стрельбы.',
            price: 500,
            load: 1
        },
        {
            name: 'Тепловизионный прицел с ПНВ',
            compatible: 'любое оружие',
            description: '(оригинал) сл близкой стрельбы = пистолет. Пистолет — -2 сл стрельбы. Видно в темноте.',
            price: 1000,
            load: 1
        },
        {
            name: 'Лазерный целеуказатель',
            compatible: 'ЛП, ОП, ПП, ТПП, ШВ, СВ, ПУЛ',
            description: 'Даёт −1 к сл стрельбы.',
            price: 500,
            load: 1
        },
        {
            name: 'Модуль «Умного оружия»',
            compatible: 'ПП, ТПП, ШП, СВ, ПУЛ, ДР, РМ',
            description: 'Не требует проверок попадания, СЛ 18 для Уклонения. Дробовики — 2 цели в радиусе 5 пространств друг от друга СЛ 16 для Уклонения.',
            price: 5000,
            load: 1
        },
        {
            name: 'Оптический прицел',
            compatible: 'ТПП, ШВ, СВ, ПУЛ, А-ОДБ',
            description: 'Стрельба на очень дальнюю дистанцию со сложностью как у снайперской винтовки.',
            price: 500,
            load: 1
        },
        {
            name: 'Оптический тепловизионный прицел с ПНВ',
            compatible: 'ТПП, ШВ, СВ, ПУЛ, А-ОДБ',
            description: 'Стрельба на очень дальнюю дистанцию со сложностью как у снайперской винтовки. Видно в темноте.',
            price: 1000,
            load: 1
        },
        {
            name: 'Особый УСМ (облегчённый)',
            compatible: 'ЛП, ОП, ПП, ТПП, ШВ, СВ',
            description: '+1 СКА, +5 сл на попадание. Требует два слота.',
            price: 1000,
            load: 1,
            slotsRequired: 2
        },
        {
            name: 'Особый УСМ (длинноходный)',
            compatible: 'ЛП, ОП, ПП, ТПП',
            description: '−1 СКА, −2 сл на попадание. Требует два слота.',
            price: 1000,
            load: 1,
            slotsRequired: 2
        },
        {
            name: 'Пламегаситель / компенсатор',
            compatible: 'ОП, КП, ПП, ТПП, ШВ, ПУЛ, ДР',
            description: '−2 к сл автоогня.',
            price: 100,
            load: 1
        },
        {
            name: 'Подствольный гранатомёт',
            compatible: 'ШВ, СВ',
            description: 'Гранатомёт на 1 гранату. Сложность — как у гранатомёта. Ресурс — 20 выстрелов.',
            price: 500,
            load: 1
        },
        {
            name: 'Подствольный дробовик',
            compatible: 'ШВ, СВ',
            description: 'Дробовик на 2 патрона по всем правилам дробовика. Ресурс — 30 выстрелов.',
            price: 500,
            load: 1
        },
        {
            name: 'Сошки',
            compatible: 'ШВ, СВ, ПУЛ',
            description: 'Установить/снять — 1 действие. Установлено — −2 СЛ. Не убраны и с рук — +2 СЛ.',
            price: 500,
            load: 1
        },
        {
            name: 'Тактическая рукоять',
            compatible: 'ТПП, ШВ, ПУЛ, СВ, ДР, ГМ',
            description: '−1 к сл на попадание.',
            price: 100,
            load: 1
        },
        {
            name: 'Тактический фонарик',
            compatible: 'любое',
            description: 'Позволяет светить прямо туда, куда он направлен.',
            price: 100,
            load: 1
        },
        {
            name: 'Цевьё с дополнительными планками',
            compatible: 'любое',
            description: '+3 слота для опций. «Клей-стикеры» на любое свободное место.',
            price: 1000,
            load: 1
        },
        {
            name: 'Штык-нож',
            compatible: 'любое',
            description: 'Считается разным оружием ближнего боя в зависимости от того, куда установлен ЛП, ОП, КП, ПП — лёгкое ОББ; ТПП, ШВ, ДР, ГМ — среднее ОББ; СВ, ПУЛ, РМ — тяжёлое ОББ. Нужно выбрать нужный.',
            price: 100,
            load: 1
        }
    ]
};

// Данные боеприпасов
const AMMO_DATA = {
    types: [
        'Стандартные',
        'Бронебойные',
        'Дозвуковые',
        'Жаканы',
        'Зажигательные',
        'Разрывные',
        'Резиновые',
        'Экспансивные',
        'Эми',
        'Дымовые',
        'Лазерные',
        'Оглушающие',
        'Токсичные'
    ],
    weaponTypes: {
        'Лёгкий пистолет': 'ЛП',
        'Обычный пистолет': 'ОП',
        'Пистолет-пулемёт': 'ПП',
        'Тяжёлый пистолет-пулемёт': 'ТПП',
        'Штурмовая винтовка': 'ШВ',
        'Крупнокалиберный пистолет': 'КП',
        'Пулемёт': 'ПУЛ',
        'Снайперская винтовка': 'СВ',
        'Дробовик': 'ДР',
        'Оружие с самонаведением': 'ОСМ',
        'Гранаты': 'Гранаты',
        'Ракеты': 'Ракеты'
    },
    prices: {
        'Стандартные': { 'ЛП': 20, 'ОП': 20, 'ПП': 20, 'ТПП': 30, 'ШВ': 30, 'КП': 40, 'ПУЛ': 40, 'СВ': 100, 'ДР': 30, 'ОСМ': 100, 'Гранаты': null, 'Ракеты': null },
        'Бронебойные': { 'ЛП': 200, 'ОП': 200, 'ПП': 200, 'ТПП': 300, 'ШВ': 300, 'КП': 300, 'ПУЛ': 300, 'СВ': 500, 'ДР': null, 'ОСМ': null, 'Гранаты': 250, 'Ракеты': 500 },
        'Дозвуковые': { 'ЛП': 100, 'ОП': 100, 'ПП': 100, 'ТПП': 100, 'ШВ': 100, 'КП': 100, 'ПУЛ': 100, 'СВ': 200, 'ДР': 100, 'ОСМ': null, 'Гранаты': null, 'Ракеты': null },
        'Жаканы': { 'ЛП': null, 'ОП': null, 'ПП': null, 'ТПП': null, 'ШВ': null, 'КП': null, 'ПУЛ': null, 'СВ': null, 'ДР': 30, 'ОСМ': null, 'Гранаты': null, 'Ракеты': null },
        'Зажигательные': { 'ЛП': 150, 'ОП': 150, 'ПП': 150, 'ТПП': 200, 'ШВ': 200, 'КП': 200, 'ПУЛ': 200, 'СВ': 500, 'ДР': 200, 'ОСМ': null, 'Гранаты': 500, 'Ракеты': 500 },
        'Разрывные': { 'ЛП': null, 'ОП': null, 'ПП': null, 'ТПП': 300, 'ШВ': 300, 'КП': 500, 'ПУЛ': 500, 'СВ': 500, 'ДР': 500, 'ОСМ': null, 'Гранаты': null, 'Ракеты': null },
        'Резиновые': { 'ЛП': 20, 'ОП': 20, 'ПП': 20, 'ТПП': 30, 'ШВ': 30, 'КП': 40, 'ПУЛ': 40, 'СВ': null, 'ДР': null, 'ОСМ': null, 'Гранаты': 10, 'Ракеты': 50 },
        'Экспансивные': { 'ЛП': 300, 'ОП': 300, 'ПП': 300, 'ТПП': 400, 'ШВ': 400, 'КП': 500, 'ПУЛ': 500, 'СВ': 500, 'ДР': 500, 'ОСМ': null, 'Гранаты': null, 'Ракеты': 500 },
        'Эми': { 'ЛП': 100, 'ОП': 100, 'ПП': 100, 'ТПП': 100, 'ШВ': 100, 'КП': 100, 'ПУЛ': 100, 'СВ': null, 'ДР': 500, 'ОСМ': 100, 'Гранаты': 500, 'Ракеты': 500 },
        'Дымовые': { 'ЛП': null, 'ОП': null, 'ПП': null, 'ТПП': null, 'ШВ': null, 'КП': null, 'ПУЛ': null, 'СВ': null, 'ДР': 1000, 'ОСМ': null, 'Гранаты': 250, 'Ракеты': 250 },
        'Лазерные': { 'ЛП': null, 'ОП': null, 'ПП': null, 'ТПП': null, 'ШВ': null, 'КП': null, 'ПУЛ': null, 'СВ': null, 'ДР': null, 'ОСМ': null, 'Гранаты': 1000, 'Ракеты': 1000 },
        'Оглушающие': { 'ЛП': null, 'ОП': null, 'ПП': null, 'ТПП': null, 'ШВ': null, 'КП': null, 'ПУЛ': null, 'СВ': null, 'ДР': null, 'ОСМ': null, 'Гранаты': 250, 'Ракеты': null },
        'Токсичные': { 'ЛП': null, 'ОП': null, 'ПП': null, 'ТПП': null, 'ШВ': null, 'КП': null, 'ПУЛ': null, 'СВ': 500, 'ДР': 500, 'ОСМ': null, 'Гранаты': 250, 'Ракеты': 250 }
    }
};

// Библиотека препаратов
const DRUGS_LIBRARY = {
    "Уличные препараты": [
        {
            name: "КаЙо",
            description: "Таблетки, выводящие радиацию — усовершенствованный Йодид Калия. Достать их не проблема, они на каждом углу. Есть даже жвачка с активным компонентом КаЙо. Желательно пить их раз в неделю, чтобы нейтрализовать общий негативный фон. В пачке обычно 10 таблеток.",
            effect: "Если не пить эти таблетки в течение месяца, то на человека начнёт влиять слабая радиация из-за накопительного эффекта от общего фона. Если ты точно знаешь, что идёшь в место с радиацией, то запасись ими. Одна выпитая таблетка устраняет действие слабой радиации на 15 минут",
            price: 10,
            category: "street"
        },
        {
            name: "ТетраБлю",
            description: "Порошок в жестяной банке для разведения с водой. При разведении немного нагревается и газируется. Жидкость имеет синеватый оттенок и на вкус как энергетик без сахара. Есть люди, которые пьют его просто так. Продаётся штучно.",
            effect: "Помогает от разных лёгких простудных эффектов. По крайней мере, теперь не страшно попасть под дождь осенью, посидеть под кондиционером летом или выйти зимой на улицу без шапки. Это нарративное лекарство.",
            price: 10,
            category: "street"
        },
        {
            name: "Кибернетин",
            description: "Ингалятор для вдыхания сразу после установки киберимплантов. Был создан в военное время, помогал солдатам легче переносить психические проблемы при установки новых киберов. Продаётся штучно.",
            effect: "Нивелирует ПО при установке киберимпланта. Вызывает привыкание. Сделай проверку Сопротивления ядам СЛ15. Если ты провалил, то твой Мастер периодически будет сообщать, когда тебе хочется еще. Без него ты начинаешь нервничать и психовать. Если игнорировать Кибернетин больше месяца, то каждая неделя начнёт приносить 1d6 ПО. Поэтому ветераны войн такие сумасшедшие.",
            price: 500,
            category: "street"
        },
        {
            name: "Криогель",
            description: "Тюбик с гелем на 10 применений. Устраняет эффекты ожогов и расстройства желудка, если проглотить.",
            effect: "Если нанести на мясную конечность, можно трогать раскалённые предметы в течение минуты. Помимо этого, Криогель помогает справиться с эффектом перелома руки или ноги на 10 минут, снижая боль от перелома. Повторное нанесение не даст эффекта.",
            price: 100,
            category: "street"
        },
        {
            name: "Нанорегенерин",
            description: "Красные капсулы с жидкостью внутри. В пачке 2 штуки.",
            effect: "Ускоряют естественное заживление ран человека в 2 раза, если он отдыхает.",
            price: 100,
            category: "street"
        },
        {
            name: "Нейрокодин",
            description: "Гематогенки для детей. Делают их спокойными, и те лучше делают домашние задания. Основная целевая аудитория — дети корпоратов. Продаётся штучно.",
            effect: "Обожаем Сёрферами, т.к. охлаждает их мозг и увеличивает УМ на 2. Также снижая урон по мозгу в Сети на 1d6 (минимум 0). Оба эффекта действуют в течение 20 минут. Эффект появляется только два раза в сутки.",
            price: 500,
            category: "street"
        },
        {
            name: "Адреналинекс",
            description: "Возбудитель для мужчин. Продаётся в пачках по 5 ампул с надписью \"СТРОГО ЗАПРЕЩЕНО ПРИНИМАТЬ ЗА РАЗ БОЛЕЕ 1 ШТУКИ!\".",
            effect: "Если принять более 1 таблетки за раз, то увеличит РЕА на 1, у мужчин вызывает лютый стояк. Каждая таблетка увеличивает срок действия бонуса к РЕА на 1 минуту. Не действует на биологических женщин.",
            price: 100,
            category: "street"
        },
        {
            name: "Феминардор",
            description: "Увеличивает выработку женских половых гормонов и повышает сексуальное влечение. Используется в основном девушками, которым предстоит не самое приятное свидание. Обычно это эскортницы престарелых корпоратов. Продаётся в пачках по 5 ампул с надписью \"СТРОГО ЗАПРЕЩЕНО ПРИНИМАТЬ ЗА РАЗ БОЛЕЕ 1 ШТУКИ!\".",
            effect: "Если принять более 1 таблетки за раз, то увеличит РЕА на 1, у женщин вызывает сильно возбуждение со всеми сопутствующими эффектами. Объекты сексуального влечения становятся действительно желанны. Каждая таблетка увеличивает срок действия бонуса к РЕА на 1 минуту. Не действует на биологических мужчин.",
            price: 100,
            category: "street"
        }
    ],
    "Клинические препараты": [
        {
            name: "ЛайфСтим",
            description: "Укольчик, продлевающий жизнь.",
            effect: "Немедленно восстанавливает ПЗ равное ТЕЛ+ВОЛЯ пациента. Можно использовать не чаще раза в сутки. Если медик затыкает человека этим лекарством более 3х раз, то он станет вялый, необщительный. И скорее всего, уйдёт в запой. Короче, депрессия, братишка.",
            price: 10,
            category: "clinical"
        },
        {
            name: "Электросеротонин",
            description: "Подавляет боль, улучшает настроение, избавляет ото сна.",
            effect: "Этот нейромедиатор позволяет пациенту не спать еще сутки без штрафов. Помимо этого, снимает боль от критических повреждений на 1d100 минут. Передозировки нет, не имеет эффекта более чем за 1 применение в неделю.",
            price: 10,
            category: "clinical"
        },
        {
            name: "Нейростим",
            description: "Ускоряет мозговую активность. Некоторые Сёрферы пр деньгах покупают лицензию Медика (взятка 5000уе), но учат только один препарат — Нейростим. Еще его можно найти в подпольных магазинах в виде готовых ампул для пневмошприца по двойной стоимости. Улучшает кровообращение головного мозга, укрепляет синоптические связи, позволяя Сёрфить без страха за жизнь.",
            effect: "Увеличивает УМ на 2 на час, уменьшает урон в головной мозг на 2d6 до нуля на 20 минут. Можно применять раз в сутки. При повторном введении не имеет эффекта, при третьем использовании за сутки удваивает эффект, но вызывает жуткие головные боли, делая сёрфинг невозможным на неделю после окончания действия.",
            price: 500,
            category: "clinical"
        },
        {
            name: "Кибердопамин",
            description: "Снижает угрозу ПО при установке киберимплантов.",
            effect: "Лёгкая и более доступная версия Кибернетина. Уменьшает ПО при установке киберимплантов в 2 раза (округляется вверх), не имеет побочных эффектов, ограничений и передозировок. Просто делает психику человека более спокойной и эластичной для проведения операции. На каждую установку импланта нужна 1 доза Кибердопамина.",
            price: 100,
            category: "clinical"
        },
        {
            name: "Адреназон",
            description: "Военный стимулятор. Увеличивает скорость реакции солдат, снимает сонливость, улучшает зрение и слух. Имеет жесткие побочки. Может вызвать привыкание",
            effect: "На сутки повышает ЛВК, СКО, РЕА и ВОЛЮ (влияет на ПЗ) +2, а также все проверки внимательности на слух и зрение еще на +2. Сделай проверку Сопротивления ядам СЛ 18. Если ты провалил, то твой Мастер периодически будет сообщать, когда тебе хочется еще. Без него ты начинаешь нервничать и психовать. Если игнорировать Адреназон больше недели, то каждая неделя начнёт приносить 1d6 ПО.",
            price: 100,
            category: "clinical"
        },
        {
            name: "Некрозон",
            description: "Лекарство, способное вытащить мёртвого с того света. Адовая смесь лекарств, которая разгоняет сердце, повышает температуру тела и ускоряет выработку крови, не давая пациенту истечь ей. Зачем переливание, когда можно заставить организм выделять её самостоятельно?",
            effect: "Снимает штраф Спасброска с человека со смертельным ранением, восстанавливая человека до 1 ПЗ. Его раны открываются, и он истекает кровью. Ближайшие три раунда он не делает спасброски, не теряет сознание, но не может совершать никакие действия, кроме перемещения со штрафом х2 к СКО. По окончании действия, пациент теряет сознание на 5 минут и оказывается в стабилизированном состоянии. Благодаря тому, что у него есть \"отверстия\" для выхода крови, он не получает урона от переизбытка давления. Если вколоть такое здоровому человеку, в течение трёх ходов он будет получать 1d6 непосредственно в ПЗ из-за переизбытка крови. К слову, она начнёт вытекать через капилляры в носу, рту и слезные каналы глаз. Стрёмное зрелище, никому не советую, может вызвать проверку ВОЛИ у неподготовленных.",
            price: 500,
            category: "clinical"
        },
        {
            name: "Бэнц",
            description: "Улучшает интуицию. У тебя есть ощущение, что ты знаешь, что произойдёт и можешь повлиять на ситуацию. Официально медицинский эффект не доказан, но всякие инфо-дивы постоянно его принимают, считая, что он добавляет им капельку удачи. В интервью актриса Йонди Сайфер даже заявила, что у нее появляется ощущение, что за неё кто-то где-то там за столом сам решает, что ей делать, а она просто поддаётся.",
            effect: "Можно применять раз в неделю или раз в игровую сессию (если за 1 сессию прошло несколько недель). Добавляет 2 невосполнимых очка УДЧ.",
            price: 100,
            category: "clinical"
        },
        {
            name: "Преднибутероферон",
            description: "Просто лекарство для терапии. Вводится людям, чтобы те ненадолго почувствовали себя увереннее и вернулись к нормальной жизни.",
            effect: "На сутки повышает выбранное медиком Врожденное качество на единицу. Одновременно может действовать только 1 препарат. Каждый последующий препарат заменяет предыдущий.",
            price: 100,
            category: "clinical"
        }
    ],
    "Уличные наркотики": [
        {
            name: "Медвежонок",
            description: "На 4 часа увеличивает УМ на 2",
            difficulty: 19,
            secondaryEffect: "Понижает твой УМ на 4. Если он падает до 0 — ты мёртв.",
            price: 10,
            category: "drugs"
        },
        {
            name: "Белый снег",
            description: "В течение 4 часов ты испытываешь счастье и радость.",
            difficulty: 16,
            secondaryEffect: "Ты нерадостен и несчастен. Ты хочешь еще белого снега.",
            price: 10,
            category: "drugs"
        },
        {
            name: "Золотинка",
            description: "Время от времени, в течение 1 часа, ты видишь галлюцинации, во время которых не можешь ничего, кроме как смотреть \"мультики\" наяву. Мастер скажет тебе когда.",
            difficulty: 16,
            secondaryEffect: "Теперь ты видишь время от времени \"мультики\" без приёма Золотинки. Чтобы избавиться от эффекта, тебе нужно еще Золотинки. Мастер скажет, когда тебя накрывает.",
            price: 500,
            category: "drugs"
        },
        {
            name: "Блёстки",
            description: "Ты король вечера, ты звезда! +4 ко всем коммуникативным проверкам, связанным с общением на усмотрение Мастера в течение 4 часов.",
            difficulty: 18,
            secondaryEffect: "Депрессия заставляет тебя думать, что ты урод и никому не нужен. -4 ко всем коммуникативным проверкам, связанным с общением на усмотрение Мастера, за исключением попыток вызвать жалость.",
            price: 100,
            category: "drugs"
        },
        {
            name: "Зелёная Корова",
            description: "Газированный напиток в жестяной банке. Сильно бодрит. Позволяет не спать сутки, не суммируется с другими эффектами, снимающими усталость. Можно использовать каждый день, но СЛ проверки будет увеличиваться каждый раз на +2",
            difficulty: 18,
            secondaryEffect: "Твоей нервной системе нанесён большой урон. Теперь ты не можешь уснуть без баночки \"Зелёной коровы\". Если ты долго не спишь, на тебя влияет отсутствие отдыха.",
            price: 100,
            category: "drugs"
        },
        {
            name: "Тройной Экспрессо",
            description: "На 1 час Повышает РЕА на 2. Ты становишься дёрганым, тебя одолевает паранойя.",
            difficulty: 16,
            secondaryEffect: "Ты теперь \"кофейный\" наркоман. Тебе постоянно хочет любого кофе, но ты прекрасно знаешь, что Экспрессо — это не кофе. Твоя РЕА снижается на 2 пункта. Более того, у тебя от кофе развивается жуткая диарея. Вторичный эффект пропадает только при \"Тройном Экспрессо\"",
            price: 50,
            category: "drugs"
        },
        {
            name: "Грандмастер",
            description: "Военный наркотик в виде крекера. Стоит тебе его съесть, как ты получаешь 2d6 ПО, которые возвращаются после прекращения Первичного Эффекта. На 24 часа ты игнорирует все эффекты критических травм и ранений (даже смертельных), исключением являются оторванные части тела, нельзя пользоваться тем, что оторвано. Ты не можешь потерять сознание. Твои ПЗ могут достигать орицательных значений, но помни, что если твои ПЗ в отрицательном значении равны цифре в максимальном положительном значении, ты автоматически мёртв. Нарративно — ты груда костей и разбросанного мяса, спасать нечего. Если по окончании Первичного действия у тебя нет хотя бы 1 ПЗ, ты умираешь. Выглядишь в эти моменты ты как зомби с оторванными кусками мяса. Пугающее зрелище. Наркотик настоящей легенды. Доведи дело до конца!",
            difficulty: 25,
            secondaryEffect: "Твои РЕА и СКО падают на 4 пункта навсегда. Малая плата за такую силу, да? Нельзя заставить кого-то съесть крекер, если он того не хочет. Он подействует только после полного психологического принятия последствий. Любимая пропагандистская игрушка командования в любую бессмысленную войну.",
            price: 1000,
            category: "drugs"
        }
    ]
};

// Библиотека транспорта
const VEHICLES_LIBRARY = {
    "Воздушный транспорт": [
        {
            name: "Персональный ЛА",
            description: "Одноместный Летательный Аппарат для передвижения в пределах города. Выглядит как капсула с микроверсией двигателя от СВВП. В основном используют корпораты, чтобы облетать пробки. Есть \"багажный крюк\" на 1 портфель или сумку. Особо архаичные версии выглядят как рюкзак с 2 ядро-баллонами и 2 соплами на спине. Управляется одной рукояткой или через Порт, если установлен разъём.",
            hp: 15,
            seats: 1,
            mechanicalSpeed: 15,
            narrativeSpeed: "80 км/ч",
            price: 10000,
            category: "air"
        },
        {
            name: "Гирокоптер",
            description: "Двухместный гирокоптер, приводимый в движение маленьким винтом позади, вместо крыла использующий винт, как у вертолёта. Из-за такой конструкции он не может зависать на месте и ему необходима маленькая ВПП. Используется в качестве патрульной-разведывательной машины. Пригоден для длительных перелётов.",
            hp: 35,
            seats: 2,
            mechanicalSpeed: 20,
            narrativeSpeed: "160 км/ч",
            price: 15000,
            category: "air"
        },
        {
            name: "Вертолёт",
            description: "Стандартная винтокрылая машина. С 2035 года люди отказались от хвостовых винтов в пользу фенестронов, либо соосной конструкции винтов. Поэтому задний винт больше не угрожает твоей жизни. Позволяет летать между континентами.",
            hp: 70,
            seats: 4,
            mechanicalSpeed: 40,
            narrativeSpeed: "320 км/ч",
            price: 40000,
            category: "air"
        },
        {
            name: "Гражданский СВВП",
            description: "Передовые технологии авиации на службы у обычного человека. Они встречаются везде, от корпоративных \"VIP-фургонов\" до обычных маршруток. В некоторых странах, в т.ч. Чернграде обычным людям запрещено иметь СВВП во избежание страшных катастроф в воздухе. Лицензия на СВВП стоит огромных денег. Поэтому на них летают экстренные службы, скорая помощь, общественный транспорт и большие шишки. А ты на своём драндулете стой в пробке.",
            hp: 100,
            seats: "4-18",
            mechanicalSpeed: 40,
            narrativeSpeed: "320 км/ч",
            price: "60000-120000",
            category: "air"
        },
        {
            name: "Боевой СВВП",
            description: "Военизированная десантная версия гражданского СВВП. Внутри склад с оружием и патронами, на корпусе турели и ракетометы. Панк, видишь такой над твоей головой — тикай с селу.",
            hp: 150,
            seats: 12,
            mechanicalSpeed: 50,
            narrativeSpeed: "400 км/ч",
            price: 100000,
            category: "air"
        },
        {
            name: "Спортивный СВВП",
            description: "Настоящий гиперкар среди СВВП. Богачи и шейхи летают на таких, когда всё остальное уже надоело. Развивает огромную скорость. Поговаривают, что они морально удлиняют пенис своим владельцам.",
            hp: 60,
            seats: 2,
            mechanicalSpeed: 60,
            narrativeSpeed: "480 км/ч",
            price: 200000,
            category: "air"
        },
        {
            name: "Скайлинер",
            description: "Тяжелый гибрид самолёта и дирижабля. Используется вольниками при перевозке больших партий груза. Для некоторых они служат домом. Есть люди в стаях вольников, которые видели полмира, но ни разу не сходили с них. Из-за возможности зависать на месте и летать практически бесконечно, их объединяют в настоящие летучие города над нейтральными водами. А если грозит опасность, они разлетаются в разные стороны, что концов не найдёшь.",
            hp: 200,
            seats: "2 на каюту",
            mechanicalSpeed: 20,
            narrativeSpeed: "160 км/ч",
            price: "10000 за каюту, минимум 3",
            category: "air"
        }
    ],
    "Водный транспорт": [
        {
            name: "Гидроцикл",
            description: "Самый обычный гидроцикл.",
            hp: 35,
            seats: 2,
            mechanicalSpeed: 20,
            narrativeSpeed: "100 км/ч",
            price: 20000,
            category: "water"
        },
        {
            name: "Рыбацкий катер",
            description: "Медлительный катер, предназначенный для ловли рыбы либо перевозки групп туристов по красивым местам.",
            hp: 50,
            seats: 6,
            mechanicalSpeed: 8,
            narrativeSpeed: "40 км/ч",
            price: 25000,
            category: "water"
        },
        {
            name: "Скоростной Катер",
            description: "Скоростной катер для преодоления больших расстояний по рекам, озерам и морю. Оснащён закрытой кабиной.",
            hp: 40,
            seats: 4,
            mechanicalSpeed: 20,
            narrativeSpeed: "100 км/ч",
            price: 30000,
            category: "water"
        },
        {
            name: "Круизная Яхта",
            description: "Роскошная круизная яхта с каютами. Чем больше кают, тем больше яхта. На таких загорают бледные миллиардеры, а служители церквей ходят по водной глади.",
            hp: 70,
            seats: "4 на каюту",
            mechanicalSpeed: 15,
            narrativeSpeed: "75 км/ч",
            price: "20000 за каюту, минимум 2",
            category: "water"
        },
        {
            name: "Баржа",
            description: "Большая, неповоротливая, медлительная баржа для перевоза большого объёма груза, автомобилей или людей. Бывают разных размеров. Морские сухогрузы в эту категорию не входят, это скорее среднего размеров паромы. Хорошее вложение для бизнеса.",
            hp: 100,
            seats: 32,
            mechanicalSpeed: 10,
            narrativeSpeed: "50 км/ч",
            price: 100000,
            category: "water"
        }
    ],
    "Наземный транспорт": [
        {
            name: "Компактный Микромобиль",
            description: "Обычный городской автомобиль для одинокого человека на обычном двигателе.",
            hp: 50,
            seats: 1,
            mechanicalSpeed: 20,
            narrativeSpeed: "160 км/ч",
            price: 15000,
            category: "ground",
            isDefault: true
        },
        {
            name: "Обычный Автомобиль (2 места)",
            description: "Городской автомобиль, универсал или минивен, в него можно посадить тёщу и мешок карточки.",
            hp: 60,
            seats: 2,
            mechanicalSpeed: 20,
            narrativeSpeed: "160 км/ч",
            price: 35000,
            category: "ground"
        },
        {
            name: "Обычный Автомобиль (4 места)",
            description: "Городской автомобиль, универсал или минивен, в него можно посадить тёщу и мешок карточки.",
            hp: 60,
            seats: 4,
            mechanicalSpeed: 20,
            narrativeSpeed: "160 км/ч",
            price: 40000,
            category: "ground"
        },
        {
            name: "Обычный Автомобиль (6 мест)",
            description: "Городской автомобиль, универсал или минивен, в него можно посадить тёщу и мешок карточки.",
            hp: 60,
            seats: 6,
            mechanicalSpeed: 20,
            narrativeSpeed: "160 км/ч",
            price: 50000,
            category: "ground"
        },
        {
            name: "Спорткар",
            description: "Спортивная машина на токо-двигателе, позволяет развивать большую скорость.",
            hp: 40,
            seats: 2,
            mechanicalSpeed: 40,
            narrativeSpeed: "320 км/ч",
            price: 50000,
            category: "ground"
        },
        {
            name: "Суперкар",
            description: "Самые шикарные автомобили, на каждую ось отдельный токо-двигатель. Разгоняются до сумасшедших скоростей, на которых практически неуправляемы. Такие часто встречаются на Транс-германских автобанах, где нет скоростных лимитов.",
            hp: 40,
            seats: 2,
            mechanicalSpeed: 60,
            narrativeSpeed: "480 км/ч",
            price: 100000,
            category: "ground"
        },
        {
            name: "Шоссейный байк",
            description: "Обычный воин дорог, чоппер или шоссейный мото-лайнер, на котором не спеша и с пафосом можно пересечь страну и не устать.",
            hp: 35,
            seats: 2,
            mechanicalSpeed: 20,
            narrativeSpeed: "160 км/ч",
            price: 15000,
            category: "ground"
        },
        {
            name: "Спортивный байк",
            description: "Спортивный байк, позволяющий развивать большую скорость. Не забудь шлем, панк, стыдно сдохнуть в канаве из-за того, что твою черепушку пробил шмель на скорости. В движение приводит токо-двигатель.",
            hp: 35,
            seats: 2,
            mechanicalSpeed: 40,
            narrativeSpeed: "320 км/ч",
            price: 30000,
            category: "ground"
        },
        {
            name: "Супербайк",
            description: "Такие байки покупают только сумасшедшие и отбитые люди. Они настолько быстры и манёвренны, что требуют управления через Порт водителя. К каждому предоставляется специальный шлем, который передаёт состояние дороги и байка прямо в визор, а сопроцессор в голове водителя реагирует ещё до того, как водитель поймет, что происходит. Эти байки не заведутся без присоединённого Порта, при отключении байк сам замедлится и аккуратно остановится. На каждом колесе стоит отдельный токо-двигатель. Если на полной скорости влететь в отбойник где-то в Варшаве, то можно долететь до Парижа. Шутка. Не проверяй.",
            hp: 25,
            seats: 2,
            mechanicalSpeed: 70,
            narrativeSpeed: "540 км/ч",
            price: 120000,
            category: "ground"
        },
        {
            name: "Фура",
            description: "Любимый транспорт наземных вольников. Это может быть что угодно в виде грузовика. Фура или большой самосвал и подобное.",
            hp: 70,
            seats: 4,
            mechanicalSpeed: 25,
            narrativeSpeed: "200 км/ч",
            price: 50000,
            category: "ground"
        },
        {
            name: "Автопоезд",
            description: "Это фура, к которой прицеплено несколько секций. Секции могут быть жилые или грузовые, либо комбинированные. Вольники часто делают целые дорожные броне-автопоезда с кучей турелей и гаражом для своих байков и даже тачек. Вот так видишь автопоезд, достаёшь свой Армхарт т1000, а из него выскакивает 4 броневика с пулемётами. Ты не такое планировал?",
            hp: "70 у каждой секции",
            seats: "4 за секцию",
            mechanicalSpeed: 20,
            narrativeSpeed: "160 км/ч",
            price: "50000 за секцию, максимум 4",
            category: "ground"
        }
    ]
};

// Библиотека модификаций транспорта
const VEHICLE_MODULES_LIBRARY = {
    "ground": [
        {
            name: "Укрепленное шасси",
            description: "Шасси, утяжеляющее и укрепляющее транспорт. Позволяет ставить большие тяжелые детали, которые превращают обычную машину в дрифтящий танк с реактивными турбинами. Добавляет транспорту 20 ПЗ.",
            price: 500,
            category: "ground",
            requirements: []
        },
        {
            name: "Облегчённое шасси",
            description: "Шасси, облегчающее и уменьшающее транспорт в габаритах и весе, позволяя ставить модули левитации и скрытности. Добавляет транспорту + 10 СКО (50 км/ч).",
            price: 500,
            category: "ground",
            requirements: []
        },
        {
            name: "3D-голопроектор",
            description: "Линза проектора, установленная где-то на корпусе транспорта. Позволяет создавать фотореалистичные 3D-модели объектов в радиусе 10 метров от машины, но из-за бликов и некоторой прозрачности всегда понятно, что это не реальный объект. Пользуется популярностью у стрит-рейсеров для обратного отсчета и обозначения маршрута, а также для общения, не выходя из машины.",
            price: 1500,
            category: "ground",
            requirements: []
        },
        {
            name: "Активная защита",
            description: "Аналог носимой активной брони, но для транспорта. Вмещает 10 магазинов с 10 зарядами каждый. Можно перезарядить сидя в машине.",
            price: 1500,
            category: "ground",
            requirements: []
        },
        {
            name: "БИО-горючее",
            description: "Установка, которая использует не типичное топливо, а био-органику. Подходит любая органика и её продукты жизнедеятельности, но имеет очень большой расход. Например, если вы решите справить нужду в бак, то это хватит буквально на 20 минут.",
            price: 1000,
            category: "ground",
            requirements: []
        },
        {
            name: "Бортовой компьютер",
            description: "Позволяет установить в транспорт ИИ, который будет управлять транспортом вместо пилота по заданному маршруту. Если ИИ \"будет напуган\" погоней или перестрелкой, то он сможет бесперебойно управлять транспортом 5 раундов, а затем выключится и остановиться, если не перехватить управление. ИИ всегда находится в начале очереди инициативы.",
            price: 5000,
            category: "ground",
            requirements: []
        },
        {
            name: "Бронестёкла",
            description: "Замены обычных стёкол на бронированные. Теперь они являются укрытиями с 20 ПЗ.",
            price: 500,
            category: "ground",
            requirements: []
        },
        {
            name: "Бронирование корпуса",
            description: "Требует укреплённое шасси. Тяжелое бронирование корпуса, добавляющее транспорту 18 ОС. Снижает СКО на 10 (80 км/ч).",
            price: 2000,
            category: "ground",
            requirements: ["Укрепленное шасси"]
        },
        {
            name: "Герметизация корпуса",
            description: "Герметизирует корпус транспорта. Если транспорт не получил урон, он может перейти в состояние полной герметичности и не впускать внешнюю атмосферу внутрь.",
            price: 500,
            category: "ground",
            requirements: []
        },
        {
            name: "Гусеничная платформа",
            description: "Меняет колеса на гусеничную платформу. Позволяет без потери скорости ездить по пересечённой местности, беспрепятственно пересекать невысокие преграды (до 1 метра высотой). Если гусеничная платформа врезается в колёсную, колёсная всегда проигрывает и получает импульс от гусеничной.",
            price: 1000,
            category: "ground",
            requirements: []
        },
        {
            name: "Кингурятник",
            description: "Транспорт не получает урона от сбитых пешеходов и предметов, если урона хватило, чтобы их уничтожить и продолжить движение.",
            price: 1000,
            category: "ground",
            requirements: []
        },
        {
            name: "Ковш",
            description: "Требует укреплённое шасси. Транспорт не получает никакого урона от своего тарана, а также от таранящих атак в ковш. Может быть установлен только 1 ковш.",
            price: 2500,
            category: "ground",
            requirements: ["Укрепленное шасси"]
        },
        {
            name: "Контрабандное отделение",
            description: "Потайной отсек, объемом 10х10, в котором можно провозить запрещённые вещи. Обнаружить контрабандный отсек можно только при осмотре транспорта специализированным облучающим оборудованием, которое обычно стоит на границах государств, если таковые там нужны. Вольный народ давно умеет проезжать мимо них, везя очередную партию палёных хронотомов.",
            price: 500,
            category: "ground",
            requirements: []
        },
        {
            name: "Крепление для тяжелого оружия",
            description: "Требует укреплённое шасси. Крепление, которое позволяет установить оружие на \"башенку\" снаружи транспорта. Это может быть как пулемёт, так и ракетомёт. Можно установить максимум 1 такую модификацию на транспорт. Стрельба из такого оружия полностью убирает штрафы на стрельбу за качку транспорта во время езды.",
            price: 2000,
            category: "ground",
            requirements: ["Укрепленное шасси"]
        },
        {
            name: "Курсовое вооружение",
            description: "Позволяет установить 1 любое оружие, которое ведёт огонь по курсу езды транспорта. Управляет им водитель/пилот. Не водитель может перезарядить его, находясь внутри транспорта.",
            price: 1000,
            category: "ground",
            requirements: []
        },
        {
            name: "Оптический камуфляж",
            description: "Требует облегчённое шасси. Позволяет делать транспорт полностью незаметным на скоростях до 3 СКО (10 км/ч). Любой резкий манёвр или выстрел из транспорта снимает камуфляж на 30 секунд. Если транспорт был повреждён во время активного оптического камуфляжа, он становится неактивным на 5 минут. Дождь, дым, случайно упавший кирпич не демаскируют транспорт.",
            price: 5000,
            category: "ground",
            requirements: ["Облегчённое шасси"]
        },
        {
            name: "Пуленепробиваемые покрышки",
            description: "Модификация для колёсной базы. Не позволяет пробить, прострелить или иным способом повредить покрышки транспорта. Тот самый случай, когда после взрыва мины от машины остаются только колёса.",
            price: 500,
            category: "ground",
            requirements: []
        },
        {
            name: "Реактивный ускоритель",
            description: "Требует укреплённое шасси. Позволяет увеличить максимальное СКО транспорта на 5 раундов (15 секунд) в три раза от изначальных. Охлаждение и перезарядка реактивных ускорителей занимает 1 минуту. Думал, тебе хватит спорт-кара, чтобы сбежать от танка? Ха-ха.",
            price: 5000,
            category: "ground",
            requirements: ["Укрепленное шасси"]
        },
        {
            name: "Форсированный двигатель (Стадия 1)",
            description: "Меняет стандартный двигатель транспорта на форсированный, увеличивая скорость транспорта на 5 СКО (40 км/ч). Новая скорость становится основной скоростью транспорта для других улучшений.",
            price: 1000,
            category: "ground",
            requirements: []
        },
        {
            name: "Форсированный двигатель (Стадия 2)",
            description: "Дополнительно увеличивает скорость транспорта на 10 СКО (80 км/ч). Требует установленную Стадию 1.",
            price: 2500,
            category: "ground",
            requirements: ["Форсированный двигатель (Стадия 1)"]
        },
        {
            name: "Форсированный двигатель (Стадия 3)",
            description: "Максимальное улучшение двигателя, увеличивает скорость на 13 СКО (102 км/ч). Требует установленную Стадию 2.",
            price: 5000,
            category: "ground",
            requirements: ["Форсированный двигатель (Стадия 2)"]
        },
        {
            name: "Усиление корпуса",
            description: "Лёгкое бронирование корпуса, добавляющее транспорту 10 ОС.",
            price: 1000,
            category: "ground",
            requirements: []
        },
        {
            name: "ЭМ-платформа",
            description: "Требует облегчённое шасси. Заменяет колесную платформу, на электромагнитную подушку, которая позволяет ездить по любой поверхности без штрафов и преодолевать любые препятствия до 3 метров высотой. Не давит на поверхность под собой, не оставляет следов, гудит со слышимостью на 10 метров.",
            price: 5000,
            category: "ground",
            requirements: ["Облегчённое шасси"]
        },
        {
            name: "Шагающая платформа",
            description: "Заменяет платформу на 4 шагающие ноги. Транспорт теперь имеет 2 режима — колёсная и шагающая. Колесная не имеет никаких бонусов. При активации шагающей, транспорт поднимается на 2 метра над землёй на 4 острых \"ногах\". Такое шасси не может нормально перемещаться по зыбучим поверхностям (пустынные барханы, толстый снег), но может карабкаться по отвесным поверхностям с уклоном до 80°. Шагающую платформу невозможно сдвинуть с места при таране, т.к. она под своим весом укрепляется в земле/бетоне/асфальте и пр. Множественная установка не даёт никаких бонусов, кроме визуального увеличения количества ног.",
            price: 5000,
            category: "ground",
            requirements: []
        },
        {
            name: "Дополнительные сиденья",
            description: "Машину пилят пополам и вставляют в неё кусок с сиденьями. Можно устанавливать не более 3х раз. Увеличивает количество мест в транспорте на 2. Создай свой лимузин.",
            price: 500,
            category: "ground",
            requirements: []
        }
    ],
    "air": [
        {
            name: "Активная защита",
            description: "Система защиты летающего транспорта от приближающихся угроз, вроде ракет. Так как ИК-ловушки стали неэффективны, летящие ракеты теперь сбивают еще на подлёте. Радиус активной защиты воздушного транспорта не 5х5, как у наземного, а 10х10.",
            price: 1500,
            category: "air",
            requirements: []
        },
        {
            name: "БИО-горючее",
            description: "Установка, которая использует не типичное топливо, а био-органику. Подходит любая органика и её продукты жизнедеятельности, но имеет очень большой расход. Например, если ты решишь справить нужду в бак, то это хватит буквально на 1 минуту. Мясорубка в комплекте.",
            price: 1000,
            category: "air",
            requirements: []
        },
        {
            name: "Подвесы или бомбовый отсек",
            description: "Позволяет сбрасывать заранее установленные или размещенные в бомбовый отсек грузы. Вмещает до 6 гранат. Гранаты (или другой размещённый груз) всегда попадают в то пространство, над которым были сброшены.",
            price: 500,
            category: "air",
            requirements: []
        },
        {
            name: "Бортовой компьютер",
            description: "Позволяет установить в транспорт ИИ, который будет управлять транспортом вместо пилота по заданному маршруту. ИИ не может участвовать в боях и совершать маневры, кроме взлёта и посадки. Он будет просто следовать заданному маршруту, несмотря ни на что. Ты можешь вызвать свой транспорт звонком ИИ через хронотом.",
            price: 5000,
            category: "air",
            requirements: []
        },
        {
            name: "Бронестёкла",
            description: "Замена обычных стёкол на бронированные. Теперь они являются укрытиями с 20 ПЗ. Также все вешние турели имеют блистер из бронестёкол",
            price: 500,
            category: "air",
            requirements: []
        },
        {
            name: "Герметизация корпуса",
            description: "Герметизирует корпус транспорта. Если транспорт не получил урон, он может перейти в состояние полной герметичности и не впускать внешнюю атмосферу внутрь. Позволяет подниматься на высоты, граничащие с космосом.",
            price: 500,
            category: "air",
            requirements: []
        },
        {
            name: "Контрабандное отделение",
            description: "Потайной отсек, объемом 10х10, в котором можно провозить запрещённые вещи. Обнаружить контрабандный отсек можно только при осмотре транспорта специализированным облучающим оборудованием.",
            price: 500,
            category: "air",
            requirements: []
        },
        {
            name: "Крепление для тяжелого оружия",
            description: "Крепление, которое позволяет установить оружие на открытое крепление снаружи транспорта. Это может быть как пулемёт, так и ракетомёт. Можно установить максимум 2 таких модификации, по 1 с каждой стороны транспорта. Стрельба из такого оружия не убирает штрафы на стрельбу из-за качки транспорта во время полёта.",
            price: 2000,
            category: "air",
            requirements: []
        },
        {
            name: "Курсовое вооружение",
            description: "Позволяет установить 1 любое оружие, которое ведёт огонь по курсу езды транспорта. Управляет им пилот. Не водитель может перезарядить его, находясь внутри транспорта.",
            price: 1000,
            category: "air",
            requirements: []
        },
        {
            name: "Оптический камуфляж",
            description: "Позволяет делать воздушный транспорт полностью незаметным на скоростях до 5 СКО (40 км/ч). Любой резкий манёвр или выстрел из транспорта снимает камуфляж на 30 секунд. Если транспорт был повреждён, во время активного оптического камуфляжа, он становится неактивным на 5 минут. Дождь, дым, случайно кинутый кирпич не демаскируют транспорт.",
            price: 10000,
            category: "air",
            requirements: []
        },
        {
            name: "Турельное вооружение",
            description: "Крепление для любых двух (спаренных) оружий, которые крепятся снаружи транспорта и управляются вторым пилотом/бортстрелком. Одновременно можно стрелять только из 1 оружия за ход.",
            price: 2500,
            category: "air",
            requirements: []
        },
        {
            name: "Усиление корпуса",
            description: "Лёгкое бронирование корпуса, добавляющее корпусу транспорта 10 ОС.",
            price: 1000,
            category: "air",
            requirements: []
        },
        {
            name: "Форсажная камера",
            description: "Позволяет увеличить максимальное СКО транспорта на 5 раундов (15 секунд) в три раза от изначальных. Охлаждение и перезарядка форсажной камеры занимает 5 минут.",
            price: 5000,
            category: "air",
            requirements: []
        }
    ],
    "water": [
        {
            name: "Абордажные крюки",
            description: "Стреляет гарпунами, которые притягивают вражескую лодку и позволяют вступить с ней в ближний бой. Дальность стрельбы и сложность, как у гранатомёта.",
            price: 1000,
            category: "water",
            requirements: []
        },
        {
            name: "Активная защита",
            description: "Аналог носимой активной брони, но для транспорта. Имеет 10 магазинов с 10 зарядами. Можно перезарядить сидя в транспорте. В подводном положении микро-ракеты заменяются микро-торпедами.",
            price: 1500,
            category: "water",
            requirements: []
        },
        {
            name: "БИО-горючее",
            description: "Установка, которая использует не типичное топливо, а био-органику. Подходит любая органика и её продукты жизнедеятельности, но имеет очень большой расход. Например, если вы решите справить нужду в бак, то этого хватит буквально на 1 минуту.",
            price: 1000,
            category: "water",
            requirements: []
        },
        {
            name: "Герметизация корпуса",
            description: "Герметизирует корпус транспорта. Полностью герметизирует водный транспорт, предотвращая попадание внешней атмосферы внутрь, что превращает судно в подводную лодку. Максимальная глубина погружения 500 метров для любого водного транспорта, если это не изначально подводная лодка на усмотрение Мастера.",
            price: 10000,
            category: "water",
            requirements: []
        },
        {
            name: "Ракетный аппарат",
            description: "Установка из 4 ракетомётов для ведения одновременной стрельбы из всех 2х труб. Требует стрелка. Максимум можно установить 2 таких штуки. В подводном положении ракеты используются, как торпеды.",
            price: 15000,
            category: "water",
            requirements: []
        },
        {
            name: "Бронестёкла",
            description: "Замена обычных стёкол на бронированные. Теперь они являются укрытиями с 20 ПЗ.",
            price: 500,
            category: "water",
            requirements: []
        },
        {
            name: "Бронирование корпуса",
            description: "Тяжелое бронирование корпуса, добавляющее транспорту 18 ОС.",
            price: 2000,
            category: "water",
            requirements: []
        },
        {
            name: "Бортовой компьютер",
            description: "Позволяет установить в транспорт ИИ, который будет управлять транспортом вместо пилота по заданному маршруту. ИИ не может участвовать в боях и совершать маневры, кроме взлёта и посадки. Он будет просто следовать заданному маршруту, несмотря ни на что.",
            price: 5000,
            category: "water",
            requirements: []
        },
        {
            name: "Крепление для тяжелого оружия",
            description: "Крепление, которое позволяет установить оружие в виде башенки со стрелком. Это может быть как пулемёт, так и ракетомёт. Можно установить максимум 1 такую модификацию. Нельзя устанавливать вместе с Ракетным аппаратом. Стрельба из такого оружия не убирает штрафы на стрельбу из-за качки транспорта во время движения по волнам.",
            price: 2000,
            category: "water",
            requirements: []
        },
        {
            name: "Эхолокатор",
            description: "Позволяет \"видеть\" дно и всё, до него. Ты можешь обнаруживать лодки, китов, затонувшие корабли.",
            price: 500,
            category: "water",
            requirements: []
        },
        {
            name: "Преобразование в амфибию",
            description: "Добавляет к лодке, яхте или любому другому водному транспорту колеса, на которых он может перемещаться по суше, имея 4 СКО (32 км/ч). Транспорт не становится наземным и не приобретает его модулей.",
            price: 20000,
            category: "water",
            requirements: []
        }
    ]
};

// Глобальное состояние персонажа
const state = {
    // Общая информация персонажа
    characterName: '',
    characterClass: '',
    characterLevel: 1,
    experiencePoints: 0,
    roleplayPoints: 0,
    avatar: '',
    
    // Основные характеристики (1-20)
    stats: {
        WILL: 5,    // Воля
        INT: 5,     // Ум
        DEX: 5,     // Ловкость
        BODY: 5,    // Телосложение
        REA: 5,     // Реакция
        TECH: 5,    // Техника
        CHA: 5      // Харизма
    },
    
    // Удача
    luck: {
        current: 1,  // Текущая удача
        max: 1       // Максимальная удача
    },
    
    // Производные характеристики
    awareness: {
        current: 50,      // Текущая осознанность
        max: 50          // Максимальная осознанность (УМ * 10)
    },
    reputation: 0,      // Репутация
    
    // Здоровье и ресурсы
    health: {
        current: 25,      // Текущее здоровье
        max: 25          // Максимальное здоровье
    },
    money: 3500,        // Деньги в уе (обновлено с 1000 на 3500)
    
    // Аватар персонажа
    avatar: '',         // Фотография персонажа (Base64)
    
    // Критические травмы
    criticalInjuries: [],
    
    // Предыстория
    backstory: '',
    
    // Навыки
    skills: [],                    // Обычные навыки
    professionalSkills: [],        // Профессиональные навыки
    bargainEnabled: true,          // Включён ли навык "Торг" для покупок и продаж
    
    // Дека (кибердека)
    deck: {
        name: 'Newby-серия',         // Название деки
        operative: '',    // Оперативка
        grid: '4',        // Сетка (обновлено с '' на '4')
        memory: '4',      // Память (обновлено с '' на '4')
        version: '10',     // Версия (обновлено с '' на '10')
        osVersion: ''     // Версия OS (заполняется пользователем)
    },
    deckPrograms: [],   // Программы деки
    deckChips: [],      // Щепки памяти
    decks: [],          // Коллекция дек пользователя
    deckGear: [],       // Снаряжение для дек (отдельно от обычного снаряжения)
    
    // ОЗУ деки
    deckRam: {
        current: 3,     // Текущее ОЗУ (обновлено с 0 на 3)
        max: 3          // Максимальное ОЗУ (обновлено с 0 на 3)
    },
    
    // Импланты (6 основных имплантов с частями и слотами)
    implants: {
        head: {
            installed: false,
            parts: {
                main: null           // голова - не куплена
            }
        },
        arms: {
            installed: false,
            parts: {
                wristLeft: null,      // кисть левая - не куплено
                wristRight: null,     // кисть правая - не куплено
                forearmLeft: null,    // предплечье левое - не куплено
                forearmRight: null,   // предплечье правое - не куплено
                shoulderLeft: null,   // плечо левое - не куплено
                shoulderRight: null   // плечо правое - не куплено
            }
        },
        legs: {
            installed: false,
            parts: {
                footLeft: null,      // стопа левая - не куплено
                footRight: null,      // стопа правая - не куплено
                shinLeft: null,       // голень левая - не куплено
                shinRight: null,      // голень правая - не куплено
                thighLeft: null,      // бедро левое - не куплено
                thighRight: null      // бедро правое - не куплено
            }
        },
        spine: {
            installed: false,
            parts: {
                cervical: null,      // шейная - не куплено
                thoracicLeft: null,   // грудная левая - не куплено
                thoracicRight: null,  // грудная правая - не куплено
                lumbar: null,        // поясничная - не куплено
                sacral: null         // крестцовая - не куплено
            }
        },
        organs: {
            installed: false,
            parts: {
                main: null           // внутренние органы - не куплено
            }
        },
        neuromodule: {
            installed: false,
            parts: {
                main: null           // нейромодуль - не куплено
            }
        }
    },
    
    // Установленные модули имплантов (для отображения на основном листе)
    installedModules: [],
    
    // Оружие
    weapons: [],
    
    // Боеприпасы
    ammo: [],
    
    // Броня (по зонам)
    armor: {
        head: { os: 0, type: 'Лёгкая', activeDefense: false, activeDefenseType: 'Микроракеты' },
        body: { os: 0, type: 'Лёгкая', activeDefense: false, activeDefenseType: 'Микроракеты' },
        arms: { os: 0, type: 'Лёгкая', activeDefense: false, activeDefenseType: 'Микроракеты' },
        legs: { os: 0, type: 'Лёгкая', activeDefense: false, activeDefenseType: 'Микроракеты' }
    },
    
    // Снаряжение
    gear: [],
    
    // Препараты
    drugs: [],
    
    // Нагрузка
    load: {
        current: 25,      // Текущая нагрузка (начинается с максимума)
        max: 25          // Максимальная нагрузка
    },
    
    // Собственность
    property: {
        housing: [],      // Жилье
        vehicles: [       // Транспорт
            // Стартовый транспорт - Компактный Микромобиль
            {
                id: 'default-vehicle',
                name: "Компактный Микромобиль",
                description: "Обычный городской автомобиль для одинокого человека на обычном двигателе.",
                hp: 50,
                currentHp: 50,
                seats: 1,
                mechanicalSpeed: 20,
                narrativeSpeed: "160 км/ч",
                price: 15000,
                category: "ground",
                modules: [],
                isDefault: true
            }
        ]
    },
    
    // Лог бросков
    rollLog: [],
    
    // Скупщик
    fenceShop: {
        itemPrices: {}  // Хранит установленные цены для предметов по их ID
    },
    
    // Графы предыстории
    backstoryGraphs: {
        born: { text: '', completed: false },
        grewUp: { text: '', completed: false },
        adolescence: { text: '', completed: false },
        loveStory: { text: '', completed: false },
        enmity: { text: '', completed: false },
        enmityBlame: { text: '', completed: false },
        revenge: { text: '', completed: false },
        whyHere: { text: '', completed: false },
        howMet: { text: '', completed: false },
        moneyAttitude: { text: '', completed: false },
        peopleAttitude: { text: '', completed: false },
        lastWeekEvent: { text: '', completed: false }
    },
    
    // Настройки интерфейса
    uiSettings: {
        compactSkills: false
    },
    
    // Размеры и порядок секций
    sectionSizes: {},
    layoutOrder: []
};

// Данные о деках для магазина
const DECK_CATALOG = [
    {
        name: "Кибердека для школьника",
        description: "Два ядра, два гига, супер игровое решение для вашего школьника. Такую не жалко пропить, потерять или разбить за двойку.",
        memory: 2,
        ram: 2,
        grid: 3,
        price: 100
    },
    {
        name: "Newby-серия",
        description: "Дека, которая не является профессиональным решением и компромиссна во всём. Как говорится, топ за свои деньги.",
        memory: 4,
        ram: 3,
        grid: 4,
        price: 500
    },
    {
        name: "Стандарт-сериес",
        description: "Самая популярная, но не дешёвая дека, которую относительно легко найти на рынке.",
        memory: 5,
        ram: 3,
        grid: 5,
        price: 5000
    },
    {
        name: "Стандарт-сериес+",
        description: "Слегка улучшенная дека, позволяющая видеть немного дальше.",
        memory: 5,
        ram: 3,
        grid: 6,
        price: 7000
    },
    {
        name: "Sasing 100х ultra Pear 14 pro Wulvacon designed limited edition",
        description: "\"ВЕЛИЧИЕ! ВОТ ОНО НАСТОЯЩЕЕ ВЕЛИЧИЕ!\" дека с зелёненькой подсветкой и автографом какого-то забытого блогера средней продажности из сети, за дохрена денег. Но стоит признать, она действительно лучше большинства аналогов. Только найти её ну очень проблематично.",
        memory: 5,
        ram: 4,
        grid: 6,
        price: 10000
    },
    {
        name: "Wn-Holm Glorious Super Series XS15 Mac Pro Limited",
        description: "Экспериментальная дека, выпущенная в единственном экземпляре, чтобы показать мощность передовых технологий Wn-Holm. Сразу же была выкуплена и исчезла в чьей-то коллекции. Были ли другие экземпляры или копии — неизвестно.",
        memory: 5,
        ram: 5,
        grid: 7,
        price: 50000
    }
];

// Данные о снаряжении для дек
const DECK_GEAR_CATALOG = [
    {
        name: "Активная система подводной защиты",
        description: "Постоянно активная автоматическая защита. Полностью поглощает эффект от первой атакующей программы, направленной на Сёрфера (не на Деку). Затем перезаряжается в течение 30 секунд. Может быть только одна.",
        price: 1000,
        type: "module",
        unique: true
    },
    {
        name: "Дополнительный слот для Щепки",
        description: "Добавляет еще 1 слот для съёмной щепки в Деке. Максимум у деки может быть 2 слота.",
        price: 1000,
        type: "module",
        maxQuantity: 1
    },
    {
        name: "Океанское хранилище",
        description: "Меняет показатель Памяти деки на 0, доставая любые программы через Волновую Сеть с острова пользователя, которые заранее размещены на нём. Требует постоянного подключения к Сети, без него может использовать только программу с Щепки. Крайне редкое улучшение, популярное у Акульих. Если каким-то образом ты нашёл такую деку, то ты не сможешь \"переподключить\" её к своему острову. Собственно, как и \"они\" твою.",
        price: 50000,
        type: "module",
        unique: true
    }
];


console.log('Data.js loaded - все данные игры загружены');